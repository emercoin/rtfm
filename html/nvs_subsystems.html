<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<link rel="icon" type="image/x-icon" href="./images/favicon.ico">
<title>Emercoin</title>
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */

@import url(//fonts.googleapis.com/css?family=Noto+Sans);
@import url(https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css); /* Default asciidoc style framework - important */

/* CUSTOMISATIONS */
/* Change the values in root for quick customisation. If you want even more fine grain... venture further. */
:root{
--maincolor:#282c34;
--primarycolor:#f39c12;
--secondarycolor:#03a9f4;
--tertiarycolor:#4db6ac;
--sidebarbackground:#21252b;
--linkcolor:#f44336;
--linkcoloralternate:#ff9800;
--white:#FFFFFF;
}

/* Text styles */

body{font-family: "Noto Sans",sans-serif;background-color: var(--maincolor);color:var(--white);}

h1{color:var(--primarycolor) !important;font-family:"Noto Sans",sans-serif;}
h2,h3,h4,h5,h6{color:var(--secondarycolor) !important;font-family:"Noto Sans",sans-serif;}
.title{color:var(--white) !important;font-family:"Noto Sans",sans-serif;font-style: normal; font-weight: normal;}
p{font-family: "Noto Sans",sans-serif ! important}
#toc.toc2 a:link{color:var(--linkcolor);}
blockquote{color:var(--tertiarycolor) !important}
.quoteblock{color:var(--white)}
code{color:var(--linkcoloralternate);background-color: var(--sidebarbackground) !important}


/* Table styles */
th{background-color: var(--maincolor);color:var(--white) !important;}
td{background-color: var(--maincolor);color: var(--linkcoloralternate) !important}


#toc.toc2{background-color:var(--sidebarbackground);}
#toctitle{color:var(--white);}

/* Responsiveness fixes */
video {
  max-width: 100%;
}

@media all and (max-width: 600px) {
  table {
    width: 55vw!important;
    font-size: 3vw;
  }
}

.exampleblock > .content {
  background-color: var(--maincolor);
}

a {
  color: var(--secondarycolor);
}

.admonitionblock td.icon .icon-tip::before {
  text-shadow: none;
  color: var(--white);
}
.admonitionblock td.icon .icon-note::before {
  color: var(--tertiarycolor);
}
.admonitionblock td.icon .icon-important::before {
  color: var(--linkcolor);
}
/*.admonitionblock td.icon .icon-caution::before {
  color: var(--linkcoloralternate);
}*/
.admonitionblock td.icon .icon-warning::before {
  color: var(--primarycolor);
}

#preamble > .sectionbody > .paragraph:first-of-type p {
  color: var(--white);
}

.quoteblock blockquote::before {
  color: var(--primarycolor);
}
.quoteblock .attribution cite, .verseblock .attribution cite {
  color: var(--white);
}
.verseblock pre {
  color: var(--white);
}
.quoteblock blockquote, .quoteblock blockquote p {
  color: var(--white);
}

.sidebarblock {
  background: var(--sidebarbackground);
}
.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint {
  background: var(--sidebarbackground);
  color: var(--white);
}

#header .details {
  color: var(--white);
}
#header .details span.email a {
  color: var(--linkcoloralternate);
}


.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#37375b}

</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="nvs_subsystems" class="article">
<div id="header">
<h1>Emercoin</h1>
<div id="toc" class="toc">
<div id="toctitle">Содержание</div>
<p><span class="toc-root"><a href="index.html">Emercoin</a></span></p><ul class="sectlevel1">
<li><a href="installation.html">1. Installation</a>
</li>
<li><a href="nvs_subsystems.html"><span class="toc-current">2. NVS и его подсистемы</span></a>
<ul class="sectlevel2">
<li><a href="nvs_subsystems.html#_emerdns">2.1. EmerDNS</a>
<ul class="sectlevel3">
<li><a href="nvs_subsystems.html#_поддерживаемые_зоны">2.1.1. Поддерживаемые зоны</a>
</li>
<li><a href="nvs_subsystems.html#_доступ_к_зонам_emerdns">2.1.2. Доступ к зонам EmerDNS</a>
<ul class="sectlevel4">
<li><a href="nvs_subsystems.html#_расширения_браузера">Расширения браузера</a>
</li>
<li><a href="nvs_subsystems.html#_opennic">OpenNIC</a>
</li>
<li><a href="nvs_subsystems.html#_настройка_в_windows">Настройка в Windows</a>
</li>
<li><a href="nvs_subsystems.html#_настройка_в_android">Настройка в Android</a>
</li>
<li><a href="nvs_subsystems.html#_настройка_в_lan">Настройка в LAN</a>
</li>
<li><a href="nvs_subsystems.html#_частные_dns_сервера">Частные DNS сервера</a>
</li>
</ul>
</li>
<li><a href="nvs_subsystems.html#_синтаксис_записей_dns">2.1.3. Синтаксис записей DNS</a>
<ul class="sectlevel4">
<li><a href="nvs_subsystems.html#_требования_к_именованию">Требования к именованию</a>
</li>
<li><a href="nvs_subsystems.html#_интернационализированные_доменные_имена">Интернационализированные доменные имена</a>
</li>
<li><a href="nvs_subsystems.html#_поддомены">Поддомены</a>
</li>
</ul>
</li>
<li><a href="nvs_subsystems.html#_создание_записей_dns">2.1.4. Создание записей DNS</a>
<ul class="sectlevel4">
<li><a href="nvs_subsystems.html#_через_cli">Через CLI</a>
</li>
<li><a href="nvs_subsystems.html#_через_gui">Через GUI</a>
</li>
<li><a href="nvs_subsystems.html#_для_тестирования">Для тестирования</a>
</li>
</ul>
</li>
<li><a href="nvs_subsystems.html#_интеграция_в_обычное_дерево_dns">2.1.5. Интеграция в обычное дерево DNS</a>
<ul class="sectlevel4">
<li><a href="nvs_subsystems.html#_unbound_dns_server">Unbound DNS Server</a>
</li>
<li><a href="nvs_subsystems.html#_обычный_pc_компьютер_acrylic_dns_прокси">Обычный PC компьютер, Acrylic DNS-прокси</a>
</li>
<li><a href="nvs_subsystems.html#_один_компьютер_прокси_сервер_bind_dns">Один компьютер, прокси-сервер BIND DNS</a>
</li>
<li><a href="nvs_subsystems.html#_локальная_сеть_прокси_bind_dns">Локальная сеть, прокси BIND DNS</a>
</li>
<li><a href="nvs_subsystems.html#_локальная_сеть_прокси_dnsmasq">Локальная сеть, прокси DNSMASQ</a>
</li>
<li><a href="nvs_subsystems.html#_общедоступный_интернет_прямой_шлюз">Общедоступный Интернет, прямой шлюз</a>
</li>
</ul>
</li>
<li><a href="nvs_subsystems.html#_виртуальные_хосты_vhosts">2.1.6. Виртуальные хосты (vhosts)</a>
</li>
<li><a href="nvs_subsystems.html#_получение_ssl_сертификатов_с_postmet">2.1.7. Получение SSL сертификатов с Postmet</a>
</li>
</ul>
</li>
<li><a href="nvs_subsystems.html#_emerssl">2.2. EmerSSL</a>
<ul class="sectlevel3">
<li><a href="nvs_subsystems.html#_создание_сертификата_emerssl">2.2.1. Создание сертификата EmerSSL</a>
</li>
<li><a href="nvs_subsystems.html#_infocard">2.2.2. InfoCard</a>
<ul class="sectlevel4">
<li><a href="nvs_subsystems.html#_создание_infocard">Создание InfoCard</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="nvs_subsystems.html#_emerssh">2.3. EmerSSH</a>
<ul class="sectlevel3">
<li><a href="nvs_subsystems.html#_установка">2.3.1. Установка</a>
</li>
<li><a href="nvs_subsystems.html#_настройка_emerssh">2.3.2. Настройка EmerSSH</a>
</li>
</ul>
</li>
<li><a href="nvs_subsystems.html#_emerdpo">2.4. EmerDPO</a>
</li>
<li><a href="nvs_subsystems.html#_enumer">2.5. ENUMER</a>
<ul class="sectlevel3">
<li><a href="nvs_subsystems.html#_описание">2.5.1. Описание</a>
</li>
<li><a href="nvs_subsystems.html#_enum">2.5.2. ENUM</a>
<ul class="sectlevel4">
<li><a href="nvs_subsystems.html#_преимущества_enum">Преимущества ENUM</a>
</li>
<li><a href="nvs_subsystems.html#_проблемы_текущих_реализаций_enum">Проблемы текущих реализаций ENUM</a>
</li>
<li><a href="nvs_subsystems.html#_enumer_децентрализованный_enum">ENUMER — децентрализованный ENUM</a>
</li>
<li><a href="nvs_subsystems.html#_как_создать_верифицированную_запись_в_системе_enumer">Как создать верифицированную запись в системе ENUMER</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="nvs_subsystems.html#_emerlnx_dead">2.6. EmerLNX (Dead)</a>
</li>
<li><a href="nvs_subsystems.html#_emertts_possible_dead">2.7. EmerTTS (Possible Dead)</a>
</li>
<li><a href="nvs_subsystems.html#_emermagnet">2.8. EmerMagnet</a>
</li>
<li><a href="nvs_subsystems.html#_filevalidator">2.9. FileValidator</a>
<ul class="sectlevel3">
<li><a href="nvs_subsystems.html#_как_это_работает">2.9.1. Как это работает</a>
</li>
<li><a href="nvs_subsystems.html#_как_этим_пользоваться">2.9.2. Как этим пользоваться</a>
</li>
<li><a href="nvs_subsystems.html#_использование_программы">2.9.3. Использование программы</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="randpay.html">3. RandPay</a>
</li>
<li><a href="mining.html">4. Mining</a>
</li>
<li><a href="articles.html">5. Статьи</a>
</li>
<li><a href="other.html">6. Other</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="nvs_subsystems">2. NVS и его подсистемы</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Emercoin предоставляет сервис для хранения пар имя &#8594; значение в своей цепочке блоков Name-Value Storage или NVS. Первоначальная концепция была унаследована от криптовалюты <a href="https://namecoin.info">NameCoin</a>, но в то время как NameCoin в основном ориентирована на поддержку децентрализованной доменной зоны .bit в своем расширении, Emercoin предоставляет универсальный расширяемый сервис для хранения и поддержки пар имя &#8594; значение без навязывания узкой специализации.</p>
</div>
<div class="paragraph">
<p>Конечно, Emercoin также поддерживает <a href="https://en.wikipedia.org/wiki/Alternative_DNS_root">распределенную альтернативную службу DNS</a>, и каждый кошелек Emercoin содержит встроенный простой DNS-сервер, поддерживающий стандартный протокол DNS <a href="https://www.ietf.org/rfc/rfc1034.txt">RFC1034</a> UDP.</p>
</div>
<h3 id="_обзор_nvs" class="discrete">Обзор NVS</h3>
<div class="paragraph">
<p>Emercoin хранит данные в блокчейне по набору пар имя &#8594; значение:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>name - метка для сохраненных данных длиной до 512 байт.</p>
</li>
<li>
<p>value - сами данные, длиной до 20 * 1024 (20кб).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Emercoin выделяет до 20 КБ для каждого имени, что достаточно для размещения открытых ключей для большинства современных криптографических приложений. Мы считаем, что блокчейн криптовалюты является чрезвычайно надежным местом для публикации и поддержки открытых ключей для многих криптографических приложений, таких как сертификаты SSH/SSL. Как и обычные платежные транзакции, пары NVS, хранящиеся в блокчейне, также получают подтверждения во время генерации блока и практически неуязвимы для изменения в результате <a href="https://ru.wikipedia.org/wiki/%D0%90%D1%82%D0%B0%D0%BA%D0%B0_%D0%BF%D0%BE%D1%81%D1%80%D0%B5%D0%B4%D0%BD%D0%B8%D0%BA%D0%B0">Атаки Посредника</a>.</p>
</div>
<div class="paragraph">
<p>Поскольку блокчейн является надежным хранилищем данных, защищенным от несанкционированного изменения, он является отличной основой для развертывания криптографической <a href="https://ru.wikipedia.org/wiki/%D0%98%D0%BD%D1%84%D1%80%D0%B0%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0_%D0%BE%D1%82%D0%BA%D1%80%D1%8B%D1%82%D1%8B%D1%85_%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%B9">Public Key Infrastructure</a> (PKI), цифрового подтверждения владения (DPO), неизменяемого ведения записей, временных меток и других распределенных сервисов.</p>
</div>
<div class="paragraph">
<p>Блокчейн Emercoin будет принимать пары NVS без каких-либо ограничений на формат данных имени или значения. Однако в целях стандартизации мы рекомендуем следующий формат имен:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;service_abbreviation&gt;:&lt;unique_key&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Например:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>dns:emercoin.com</pre>
</div>
</div>
<div class="paragraph">
<p>У каждой пары NVS есть свой владелец. Каждого владельца указывает платежный адрес Emercoin, который хранится вместе с парой. Только владелец платежного адреса может изменить или удалить пару, или передать право собственности на другой адрес. Когда создается новая пара, в локальном кошельке создается новый платежный адрес для пары.</p>
</div>
<div class="paragraph">
<p>Вы можете управлять записями NVS либо через графический интерфейс кошелька Emercoin, либо через emercoin-cli.</p>
</div>
<h3 id="_аббревиатуры_сервисов" class="discrete">Аббревиатуры сервисов</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Аббревиатура</strong></th>
<th class="tableblock halign-left valign-top"><strong>Сервис</strong></th>
<th class="tableblock halign-left valign-top"><strong>Сервис в Emercoin</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DNS записи</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EmerDNS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSH публичные ключи</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EmerSSH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GPG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GNU PGP публичные ключи</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">KX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://tools.ietf.org/html/rfc2230">RFC2230</a> публичные ключи</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSL Сертификат</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EmerSSL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLS цифровая подпись публичного ключа</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TTS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trusted Timestamp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EmerTTS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DPO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Digital Proof-of-Ownership</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EmerDPO</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Magnet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BitTorrent магнет линки</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EmerMagnet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SWIFT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Банковская подсистема перeводов SWIFT</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ENUM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ENUM телефонные записи</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ENUMER</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_emerdns">2.1. EmerDNS</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Преимущества</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Защита веб-сайтов от блокировки властями</p>
</li>
<li>
<p>Предотвращение изменения, отзыва или приостановки доменных имен</p>
</li>
<li>
<p>Регистрация на любой срок, хоть на 1000 лет.</p>
</li>
<li>
<p>Стоимость владения намного меньше чем для доменов ICANN</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Боитесь, что ваш сайт могут заблокировать власти? Возможно, не зря, учитывая «закручивание гаек» по всему миру.
Вам поможет EmerDNS.</p>
</div>
<div class="paragraph">
<p>EmerDNS не грозит цензура, ведь это полностью децентрализованная система. Никто, кроме вас, не сможет изменить созданную вами DNS-запись.</p>
</div>
<div class="paragraph">
<p>Сайты на EmerDNS легко резолвятся — через браузерные расширения, серверы OpenNIC или прокси-серверы.</p>
</div>
<div class="paragraph">
<p>EmerDNS поддерживает полный набор DNS-записей. В рамках NVS система работает под аббревиатурой DNS.
Благодаря безопасному блокчейну Emercoin, записи о доменных именах полностью децентрализованы и нецензурируемы. Никакой регулятор не сможет их изменить, отозвать или заблокировать. Только владелец записи — тот, у кого есть закрытый ключ от соответствующего платёжного адреса, — может совершать над ней действия. Работать над записями в NVS можно через GUI-кошелёк Emercoin или используя API-команды “name_new/name_update”.</p>
</div>
<div class="paragraph">
<p>DNS-записи можно легко получить по API от любого Emercoin-кошелька через JSON-RPC, командную строку, или стандартный RFC1034-протокол, встроенный в каждый кошелёк.</p>
</div>
<hr>
<div class="paragraph">
<p>EmerDNS - это система для децентрализованных доменных имен, поддерживающая полный спектр записей DNS. EmerDNS работает под аббревиатурой службы «dns» в Emercoin NVS.</p>
</div>
<div class="paragraph">
<p>Благодаря безопасному и распределенному блокчейну Emercoin записи доменных имен полностью децентрализованы и не подвергаются цензуре и не могут быть изменены, отозваны или приостановлены каким-либо органом. Только владелец записи может изменять или передавать ее другому владельцу, а владелец записи определяется тем, кто контролирует закрытый ключ для соответствующего платежного адреса.</p>
</div>
<div class="paragraph">
<p>Только владельцы записей DNS могут управлять своими записями: изменять значения, время аренды, удалять их или передавать право собственности на другой адрес EMC. Эти действия могут быть выполнены с помощью Emercoin NVS в графическом интерфейсе кошелька Emercoin или с помощью команд name_new или name_update в Emercoin API .</p>
</div>
<div class="paragraph">
<p>Записи DNS можно легко получить из любого кошелька Emercoin с помощью Emercoin API, используя JSONRPC или командную строку, или с помощью стандартного протокола DNS RFC1034 , встроенного в каждый кошелек Emercoin.</p>
</div>
<div class="sect3">
<h4 id="_поддерживаемые_зоны">2.1.1. Поддерживаемые зоны</h4>
<div class="paragraph">
<p>Технически EmerDNS может поддерживать любую DNS-зону или TLD. Однако для бесшовной интеграции в стандартное дерево DNS и предотвращения конфликтов с существующими DNS-зонами в настоящее время мы рекомендуем создавать записи EmerDNS только в зонах:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>.emc .coin .lib .bazar</pre>
</div>
</div>
<div class="paragraph">
<p>Текущие корневые зоны, поддерживаемые EmerDNS, и их назначение:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Зона</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Назначение</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.coin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">веб-сайты цифровой валюты и торговли</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.emc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">сайты, связанные с проектом Emercoin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.lib</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">от слов библиотека и свобода - то есть "Знания и Свобода"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.bazar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">рынки, маркеты</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_доступ_к_зонам_emerdns">2.1.2. Доступ к зонам EmerDNS</h4>
<div class="paragraph">
<p>Есть несколько способов доступа к доменам EmerDNS.</p>
</div>
<div class="sect4">
<h5 id="_расширения_браузера">Расширения браузера</h5>
<div class="paragraph">
<p>Существует несколько сторонних плагинов для браузеров, которые позволяют легко посещать домены EmerDNS:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Расширение 44 браузера Peername.com (Firefox, Chrome, Opera) <a href="https://peername.com" class="bare">peername.com</a></p>
</li>
<li>
<p>Расширение для браузера friGate (Firefox, Chrome, Opera) <a href="https://fri-gate.org" class="bare">fri-gate.org</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_opennic">OpenNIC</h5>
<div class="paragraph">
<p><a href="https://www.opennic.org">OpenNIC</a> - это альтернативный реестр доменных имён, который позволяет пользователям получить доступ к веб-сайтам, находящимся за пределами традиционных доменных зон, таких как .com или .org. OpenNIC не зависит от ICANN и предоставляет простой и удобный способ доступа к веб-ресурсам, которые могут быть заблокированы в некоторых странах или регионах.</p>
</div>
<div class="paragraph">
<p>Благодаря соглашению между Emercoin и OpenNIC, пользователи DNS-серверов OpenNIC могут получить доступ к доменным зонам Emercoin. Для этого необходимо настроить DNS-преобразователь для серверов OpenNIC, следуя <a href="https://wiki.opennic.org/doku.php">инструкциям</a>. Таким образом, вы можете получить доступ к веб-сайтам, зарегистрированным в блокчейне Emercoin, а также к другим доменным зонам, поддерживаемым OpenNIC.</p>
</div>
</div>
<div class="sect4">
<h5 id="_настройка_в_windows">Настройка в Windows</h5>
<div class="paragraph">
<p>Пример настройки DNS в Windows, вы можете посмотреть <a href="http://maxima-library.org/forum/dobro-pozhalovat/2543-chtoby-ne-poteryatsya-obrashchenie-k-chitatelyam#48455">здесь</a>.</p>
</div>
<div class="paragraph">
<p>Windows начиная с версии 10 поддерживает DoT и DoH. Пример настройки <a href="https://www.bleepingcomputer.com/news/microsoft/how-to-enable-dns-over-https-doh-in-windows-10/">здесь</a>.</p>
</div>
<div class="paragraph">
<p>Чтобы настроить DNS over TLS через графический интерфейс, выполните следующие действия:</p>
</div>
<div class="paragraph">
<p>Обратите внимание, что конкретные шаги могут отличаться в зависимости от версии Windows 10 и используемой сетевой конфигурации.</p>
</div>
</div>
<div class="sect4">
<h5 id="_настройка_в_android">Настройка в Android</h5>
<div class="paragraph">
<p>Android поддерживает DNS over TLS без установки каких либо приложений. Это значит что вы можете получить доступ к зонам EmerDNS просто вписав адрес DNS сервера (Opennic или частного DNS сервера)</p>
</div>
<div class="paragraph">
<p><a href="https://simpledns.plus/kb/198/how-to-enable-dns-over-tls-dot-in-android">Инструкция по настройке</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_настройка_в_lan">Настройка в LAN</h5>
<div class="paragraph">
<p>Если вы хотите что бы доступ к EmerDNS был у всех устройств вашей локальной сети без необходимости настройки на каждом устройстве. Вы можете поменять DNS сервера которые настроены на вашем роутере на Opennic или любой другой частный DNS который поддерживает EmerDNS. После этого все устройства в вашей сети будут иметь доступ к разрешению зон EmerDNS.</p>
</div>
<div class="paragraph">
<p>А если вы администратор сети предприятия, то вы можете аналогично предоставить доступ всем сотрудникам к зонам EmerDNS.</p>
</div>
</div>
<div class="sect4">
<h5 id="_частные_dns_сервера">Частные DNS сервера</h5>
<div class="paragraph">
<p>Существуют проекты DNS серверов от частных энтузиастов.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Адрес</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Описание</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dns.wg0.xyz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DoT, DoH, DNS</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_синтаксис_записей_dns">2.1.3. Синтаксис записей DNS</h4>
<div class="paragraph">
<p>Типы записей поддерживаемые в EmerDNS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>A, AAAA, NS, PTR, CNAME, MX, TXT, TLSA, SRV, SD</pre>
</div>
</div>
<div class="paragraph">
<p>Записи <strong>SOA</strong> и <strong>WKS</strong> напрямую не поддерживаются встроенным DNS-сервером Emercoin.
Запись <strong>SD</strong> используется только в EmerDNS для определения поддоменов.</p>
</div>
<div class="paragraph">
<p>Чтобы создать DNS-запись в блокчейн Emercoin, создайте (или обновите) пару имя &#8594; значение под аббревиатурой службы «dns» в Emercoin NVS следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"name" : "dns:&lt;your_name_here&gt;"
"value" : "&lt;list of NS-records&gt;"</pre>
</div>
</div>
<div class="paragraph">
<p>Например:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"name" : "dns:example.coin"
"value" : "A=192.168.0.123,127.0.0.1|AAAA=2607:f8b0:4004:806::1001|NS=ns1.google.com|TTL=4001"</pre>
</div>
</div>
<div class="paragraph">
<p>В этом примере домен example.coin определяется следующим образом:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>две A-записи (192.168.0.123 и 127.0.0.1);</p>
</li>
<li>
<p>одна AAAA-запись (2607:f8b0:4004:806::1001);</p>
</li>
<li>
<p>одна NS-запись (ns1.google.com);</p>
</li>
<li>
<p>TTL запись;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Записи разделяются вертикальной чертой или вертикальной чертой разделителя по умолчанию ("<strong>|</strong>").
При необходимости вы можете переопределить разделитель, добавив к значению префикс:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>~&lt;новый символ разделителя&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Например, если вы хотите использовать символ решетки «<strong>#</strong>» в качестве разделителя вместо вертикальной черты, вы можете присвоить ему:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>~#</pre>
</div>
</div>
<div class="paragraph">
<p>в начале значения следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"value" : "~#A=192.168.0.123,127.0.0.1#AAAA=2607:f8b0:4004:806::1001#NS=ns1.google.com#TTL=4001"</pre>
</div>
</div>
<div class="paragraph">
<p>Обратите внимание: если вы используете пробел « » в качестве разделителя, вы не сможете использовать его внутри полей. Поэтому вместо этого вы должны выбрать соответствующий символ в качестве разделителя для ваших записей.</p>
</div>
<div class="paragraph">
<p>Как описано выше, каждая запись может содержать несколько значений. В приведенном примере A-запись содержит два значения, разделенных запятой «,» Вы также можете переопределить разделитель значений с помощью «<strong>~</strong>». В следующем примере показано, как переопределить разделитель два раза: косая черта «<strong>/</strong>» в качестве разделителя записей и звездочка «<strong>*</strong>» в качестве разделителей значений для нескольких записей TXT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"value" : "~/TXT=~*This is text, Hello!*2nd text/MX=gmail.com:33,mx.microsoft.com:66/CNAME=emc.cc.st/A=192.168.0.100,127.0.0.1"</pre>
</div>
</div>
<div class="paragraph">
<p>В последнем примере мы продемонстрировали использование записи MX. Значение MX содержит ссылку на почтовый обменник и приоритет, разделенные двоеточием «<strong>:</strong>».</p>
</div>
<div class="paragraph">
<p>Если приоритет опущен, значение по умолчанию - 1.</p>
</div>
<div class="paragraph">
<p>Кроме того, в последнем примере намеренно опущена запись TTL. Значение TTL по умолчанию - 24 часа.</p>
</div>
<div class="sect4">
<h5 id="_требования_к_именованию">Требования к именованию</h5>
<div class="paragraph">
<p>Доменные имена могут быть сформированы из набора буквенно-цифровых символов ASCII в нижнем регистре (az, 0-9). Кроме того, дефис («-») разрешен, если он окружен символами, цифрами или дефисами, хотя он не должен начинать или заканчивать имя. Допустимы только строчные буквы.</p>
</div>
</div>
<div class="sect4">
<h5 id="_интернационализированные_доменные_имена">Интернационализированные доменные имена</h5>
<div class="paragraph">
<p><a href="https://ru.wikipedia.org/wiki/IDN">Интернационализированные доменные имена</a> (арабский, китайский, кириллица и т. Д.) Технически возможны с использованием <a href="https://ru.wikipedia.org/wiki/Punycode">punycode</a>.</p>
</div>
<div class="paragraph">
<p>Например, если нам нужно следующее интернационализированное доменное имя:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>dns:президент.emc</pre>
</div>
</div>
<div class="paragraph">
<p>Затем мы должны расшифровать его с помощью <a href="https://www.charset.org/punycode">конвертера punycode</a> и зарегистрировать результат:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>dns:xn--d1abbgf6aiiy.emc</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_поддомены">Поддомены</h5>
<div class="paragraph">
<p>Общая проблема с распределенным DNS заключается в том, что каждый может выделить любое уникальное имя, позволяя кому-то зарегистрировать поддомен для домена, которым он не владеет. Чтобы исправить эту ситуацию, в EmerDNS есть специальные способы управления поддоменами:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Запись субдомена (SD) в значении NVS родительского домена DNS, разрешает поиск и разрешение субдомена непосредственно в подсистеме Emercoin DNS, например SD = www, ftp, mx</p>
</li>
<li>
<p>Запись сервера имен (NS) в значении NVS родительского DNS, позволяет ссылаться на внешние серверы имен, управляемые владельцем домена, для обеспечения авторитетного поиска и разрешения субдомена, внешнего по отношению к Emercoin DNS, например NS = ns.example.com</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Разрешение поддоменов применяется в следующем порядке, рекурсивно ко всем поддоменам третьего уровня и глубже:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Сначала проверьте SD-запись в родительском значении DNS на предмет ссылки на запрошенный поддомен. Если ссылка на субдомен найдена, найдите субдомен в подсистеме Emercoin NVS.</p>
</li>
<li>
<p>Затем проверьте наличие записи сервера имен (NS) в родительском значении DNS. Если найдено, сгенерировать ссылку на внешний сервер имен.</p>
</li>
<li>
<p>Если в записях SD или NS разрешение не получается, возвращайте данные по родительскому домену (т.е. Игнорируйте префикс поддомена).</p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
При использовании внешних серверов имен, пожалуйста, позаботьтесь о правильном разрешении имен на этих серверах, включая любые суффиксы шлюза.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><br>
Пример 1 - родительский элемент содержит записи SD и NS</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p></p>
<div class="listingblock">
<div class="content">
<pre>dns:example.coin -&gt; A=1.2.3.4|SD=www,gopher|NS=ns.example.com</pre>
</div>
</div>
</li>
<li>
<p></p>
<div class="listingblock">
<div class="content">
<pre>dns:www.example.coin -&gt; A=5.6.7.8</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>В этом случае субдомены будут разрешены следующим образом:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>example.coin будет разрешен записью [1] и вернет A = 1.2.3.4</p>
</li>
<li>
<p>www.example.coin будет подтвержден записью [1], разрешен записью [2] и вернется A = 5.6.7.8</p>
</li>
<li>
<p>gopher.example.coin будет одобрен записью [1] и не разрешен, поскольку NVS не содержит соответствующей записи DNS. Это вернет NXDOMAIN.</p>
</li>
<li>
<p>mail.example.coin не будет одобрен записью [1], но запись NS создаст ссылку на внешний сервер ns.example.com, который может разрешить или не разрешить этот субдомен.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Таким образом, одна запись [1] поддерживает гибкое гибридное разрешение:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>www</strong> разрешено Emercoin NVS.</p>
</li>
<li>
<p><strong>gopher</strong> заблокирован.</p>
</li>
<li>
<p>все остальные разрешаются делегированным NS = ns.example.com.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Пример 2 - родительский элемент содержит только SD-запись:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p></p>
<div class="listingblock">
<div class="content">
<pre>dns:example.coin -&gt; A=1.2.3.4|SD=www,gopher</pre>
</div>
</div>
</li>
<li>
<p></p>
<div class="listingblock">
<div class="content">
<pre>dns:www.example.coin -&gt; A=5.6.7.8</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>В этом случае субдомены будут разрешены следующим образом:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>example.coin будет разрешен записью [1] и вернет A = 1.2.3.4</p>
</li>
<li>
<p>www.example.coin будет подтвержден записью [1], разрешен записью [2] и вернется A = 5.6.7.8</p>
</li>
<li>
<p>gopher.example.coin будет одобрен записью [1] и не разрешен, поскольку NVS не содержит соответствующей записи DNS. Это вернет NXDOMAIN.</p>
</li>
<li>
<p>mail.example.coin не будет утвержден записью [1], и (из-за отсутствия записи NS) префикс «mail» будет проигнорирован и разрешен так же, как example.coin.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><br>
Пример 3 - родительский элемент содержит только NS-запись:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p></p>
<div class="listingblock">
<div class="content">
<pre>dns:example.coin -&gt; A=1.2.3.4|NS=ns.example.com</pre>
</div>
</div>
</li>
<li>
<p></p>
<div class="listingblock">
<div class="content">
<pre>dns:www.example.coin -&gt; A=5.6.7.8</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>В этом случае субдомены будут разрешены следующим образом:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>example.coin будет разрешен записью [1] и вернет A = 1.2.3.4</p>
</li>
<li>
<p>www.example.coin не будет одобрен записью [1] и будет генерировать ссылку на внешний сервер ns.example.com, который может разрешить или не разрешить этот субдомен.</p>
</li>
<li>
<p>Запись [2] будет проигнорирована и не будет участвовать в разрешении DNS.</p>
</li>
<li>
<p>mail.example.coin не будет одобрен записью [1] и создаст ссылку на внешний сервер ns.example.com, который может разрешить или не разрешить этот субдомен.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Пример 4 - родительский элемент не содержит ссылок на поддомен:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p></p>
<div class="listingblock">
<div class="content">
<pre>dns:example.coin -&gt; "A=1.2.3.4"</pre>
</div>
</div>
</li>
<li>
<p></p>
<div class="listingblock">
<div class="content">
<pre>dns:mx.example.coin -&gt; "A=5.6.7.8"</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>В этом случае субдомены будут разрешены следующим образом:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>example.coin &#8594; «A = 1.2.3.4»</p>
</li>
<li>
<p>mx.example.coin &#8594; «A = 1.2.3.4»</p>
</li>
<li>
<p>www.example.coin &#8594; «A = 1.2.3.4»</p>
</li>
<li>
<p>upload.ftp.example.coin &#8594; «A = 1.2.3.4»</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Поскольку запись [1] не содержит записей SD или NS, все поддомены будут преобразованы в «родительский домен» example.coin. Запись [2] будет проигнорирована и не будет участвовать в разрешении DNS.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_создание_записей_dns">2.1.4. Создание записей DNS</h4>
<div class="paragraph">
<p>Создать запись вы можете двумя способами, первый это через CLI  и второй через GUI кошелька.</p>
</div>
<div class="sect4">
<h5 id="_через_cli">Через CLI</h5>
<div class="paragraph">
<p>Для создания записи через CLI вы можете воспользоваться утилитой:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>emercoin-cli</pre>
</div>
</div>
<div class="paragraph">
<p>которая устанавливается вместе с кошельком.</p>
</div>
<div class="paragraph">
<p>Создание DNS имени с записями типа A и AAAA:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>emercoin-cli name_new "A=5.255.97.202|AAAA=2a04:52c0:102:62d6::babe:cafe" 5000</pre>
</div>
</div>
<div class="paragraph">
<p>Здесь мы указали ключ <strong>name_new</strong> что означает создание нового домена.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Если вам нужно изменить записи в домене, используйте ключ <strong>name_update</strong>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Далее в кавычках идет строка которая будет содержаться в поле NVS <strong>name</strong>. Здесь необходимо указать ключевое слово <strong>dns:</strong> с двоеточием, далее без пробела указать имя вашего домена.</p>
</div>
<div class="paragraph">
<p>Следующая строка будет содержаться в поле NVS <strong>value</strong>. Здесь нужно указать типы записей и их значения. В данном примере мы объявляем два типа записей <strong>A</strong> <strong>AAAA</strong> и их значения ip адреса.</p>
</div>
<div class="paragraph">
<p>И последний параметр <strong>5000</strong> это кол-во дней на которое мы регистрируем домен.</p>
</div>
</div>
<div class="sect4">
<h5 id="_через_gui">Через GUI</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Запустите приложение Emercoin Wallet и следуйте инструкции на скриншоте:</p>
<div class="imageblock">
<div class="content">
<img src="images/wallet_create_nvs_1.png" alt="wallet create nvs 1">
</div>
</div>
</li>
<li>
<p>В открывшемся окне заполните данные вашего домена и нажмите OK:</p>
<div class="imageblock">
<div class="content">
<img src="images/wallet_create_nvs_2.png" alt="wallet create nvs 2">
</div>
</div>
</li>
<li>
<p>Выберите срок на который вы хотите зарегистрировать домен. Нажмите <strong>submit</strong> что бы отправить транзакцию:</p>
<div class="imageblock">
<div class="content">
<img src="images/wallet_create_nvs_3.png" alt="wallet create nvs 3">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_для_тестирования">Для тестирования</h5>
<div class="paragraph">
<p>Так как записи которые помещаются в БЧ невозможно удалить, рекомендуется для минимизации захламления БЧ
использовать либо сеть testnet, либо локальный файл конфигурации.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Тестовая сеть (testnet)</dt>
<dd>
<p>Для создания записей в тестовой сети смотрите статьи <a href="articles.html#art_testnet_medium">один</a>, <a href="articles.html#art_testnet_habr">два</a></p>
</dd>
<dt class="hdlist1">Локально через файл конфигурации</dt>
<dd>
<p>Для быстрого тестирования записей встроенного DNS сервера, можно вообще не создавать записи в БЧ. Записи можно прописать в конфигурационных файлах. Формат записей:</p>
<div class="listingblock">
<div class="content">
<pre>&lt;domain&gt;=&lt;dns_record&gt;=&lt;value&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Создайте в каталоге вашего кошелька файл <code>emcdnslocal.conf</code>, добавьте в него записи для домена который вы хотите протестировать:</p>
</div>
<div class="listingblock">
<div class="title">emcdnslocal.conf</div>
<div class="content">
<pre>wg0.lib=A=5.255.97.202|AAAA=2a04:52c0:102:62d6::babe:cafe|MX=mail.wg0.lib|SD=mail,mx,_tcp
mail.wg0.lib=A=5.255.97.202
mx.wg0.lib=A=5.255.97.202
_tcp.wg0.lib=SD=_imaps
_imaps._tcp.wg0.lib=SRV=5:0:mail.wg0.lib:993</pre>
</div>
</div>
<div class="paragraph">
<p>Откройте файл конфигурации вашего кошелька и добавьте следующую строку:</p>
</div>
<div class="listingblock">
<div class="title">emercoin.conf</div>
<div class="content">
<pre>...
emcdnslocalcf=./emcdnslocal.conf
...</pre>
</div>
</div>
<div class="paragraph">
<p>Перезагрузите сервис кошелька и попробуйте отправить запрос на разрешение добавленных имен:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>dig wg0.lib mx
...
dig mail.wg0.lib A
...
dig _imaps._tcp.wg0.lib srv
...</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_интеграция_в_обычное_дерево_dns">2.1.5. Интеграция в обычное дерево DNS</h4>
<div class="paragraph">
<p>Во-первых, нужно активировать <a href="https://www.ietf.org/rfc/rfc1034.txt">RFC1034</a> сервер DNS в Emercoin по задав два необязательных параметра в emercoin.conf конфигурационном файле, emcdns и emcdnsport :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>emcdns=1 # Запускать DNS сервер. По умолчанию 0 (отключен)
emcdnsport=NNN # Порт для DNS, по умолчанию 5335</pre>
</div>
</div>
<div class="paragraph">
<p>Чтобы интегрировать DNS-сервер Emercoin в обычное DNS-дерево, вы можете использовать полнофункциональный DNS или кэширующий DNS. Стандартный DNS-клиент Windows не может выполнить эту работу, поэтому для этого следует использовать дополнительный DNS-прокси-сервер. Ниже мы покажем несколько примеров.</p>
</div>
<div class="sect4">
<h5 id="_unbound_dns_server">Unbound DNS Server</h5>
<div class="paragraph">
<p>Пример конфигурации для настройки DNS сервера <a href="https://nlnetlabs.nl/projects/unbound/about/">Unbound</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>do-not-query-localhost: no

domain-insecure: "coin."
domain-insecure: "emc."
domain-insecure: "lib."
domain-insecure: "bazar."
domain-insecure: "enum."

stub-zone:
	name: coin.
        stub-addr: 127.0.0.1@5335
	stub-first: yes

stub-zone:
	name: emc.
	stub-addr: 127.0.0.1@5335
	stub-first: yes

stub-zone:
	name: lib.
	stub-addr: 127.0.0.1@5335
	stub-first: yes

stub-zone:
	name: bazar.
	stub-addr: 127.0.0.1@5335
	stub-first: yes

stub-zone:
	name: enum.
	stub-addr: 127.0.0.1@5335
	stub-first: yes

forward-zone:
	name: .
	forward-addr: 1.1.1.1		# cloudflare
	forward-addr: 8.8.4.4		# google
	forward-addr: 208.67.220.220	# openDNS
	forward-addr: 209.244.0.4	# Level3
	forward-addr: 64.6.65.6         # NeuStar</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_обычный_pc_компьютер_acrylic_dns_прокси">Обычный PC компьютер, Acrylic DNS-прокси</h5>
<div class="paragraph">
<p>Самый простой случай - запустить кошелек Emercoin и все остальное на одном ПК. Для этого мы рекомендуем установить на ваш компьютер облегченный <a href="http://mayakron.altervista.org/support/acrylic/Home.htm">прокси-сервер Acrylic DNS</a>. Acrylic улучшит производительность вашего ПК, разрешая DNS-запросы с локальным кешем, уменьшая задержки при просмотре или любой другой интернет-активности.</p>
</div>
<div class="paragraph">
<p>Для установки и начальной настройки в Windows см. <a href="http://mayakron.altervista.org/support/acrylic/Windows10Configuration.htm">Руководство на веб-сайте</a> Acrylic. После установки вам необходимо настроить Acrylic для интеграции доменных зон Emercoin. Пример файла конфигурации <a href="http://mayakron.altervista.org/support/acrylic/Configuration.htm">доступен в Интернете</a>. Для настройки вы должны перенаправить все запросы в зоны EmerDNS (.emc , .coin , .lib , .bazar) в локальный кошелек Emercoin, а все запросы в другие зоны - провайдеру DNS по умолчанию. Это можно настроить в файле конфигурации Acrylic следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>; Forward to primary (default) DNS server anything but EMC-zones
PrimaryServerHostNameAffinityMask=^*.emc;^*.coin;^*.lib;^*.bazar;*
PrimaryServerAddress=DNS_of_your_provider or any public DNS, for example: 8.8.4.4
PrimaryServerPort=53

; Forward to EMC wallet requests for EMC-zones only
SecondaryServerHostNameAffinityMask=*.emc;*.coin;*.lib;*.bazar
SecondaryServerAddress=127.0.0.1
SecondaryServerPort=5335</pre>
</div>
</div>
<div class="paragraph">
<p>В Windows путь по умолчанию к файлу конфигурации Acrylic:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>C:\Program Files (x86)\Acrylic DNS Proxy\</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_один_компьютер_прокси_сервер_bind_dns">Один компьютер, прокси-сервер BIND DNS</h5>
<div class="paragraph">
<p>Вместо установки прокси-сервера DNS у вас также есть возможность установить полноценный DNS-сервер. К счастью, полный DNS-сервер BIND доступен для Windows бесплатно. В Интернете можно найти множество руководств, в которых показано, как установить BIND в Windows.</p>
</div>
<div class="paragraph">
<p>После установки вы должны указать BIND перенаправить EMC-зоны в локальный кошелек Emercoin, добавив в файл конфигурации BIND с именем.conf следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zone "emc" {
 type forward;
 forward only;
 forwarders {
   127.0.0.1 port 5335; // Local Emercoin wallet
 };
};
zone "coin" {
 type forward;
 forward only;
 forwarders {
   127.0.0.1 port 5335; // Local Emercoin wallet
 };
};
zone "lib" {
 type forward;
 forward only;
 forwarders {
   127.0.0.1 port 5335; // Local Emercoin wallet
 };
};
zone "bazar" {
 type forward;
 forward only;
 forwarders {
   127.0.0.1 port 5335; // Local Emercoin wallet
 };
};</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_локальная_сеть_прокси_bind_dns">Локальная сеть, прокси BIND DNS</h5>
<div class="paragraph">
<p>Если у вас есть сервер со статическим IP-адресом в вашей локальной сети, вы можете установить BIND на свой сервер и указать основной DNS-адрес настольного ПК на ваш сервер BIND. На сервере вы можете запустить безголовый кошелек Emercoin, на который BIND будет перенаправлять запросы в соответствующие зоны. В этом случае конфигурация BIND точно такая же, как и выше.</p>
</div>
<div class="paragraph">
<p>Также вы можете запустить кошелек Emercoin на любом ПК в вашей локальной сети, а не на сервере BIND. Если это так, вам следует изменить адрес пересылки в конфигурации BIND с 127.0.0.1 на IP-адрес этого ПК. Конечно, у этого ПК должен быть статический IP-адрес локальной сети.</p>
</div>
</div>
<div class="sect4">
<h5 id="_локальная_сеть_прокси_dnsmasq">Локальная сеть, прокси DNSMASQ</h5>
<div class="paragraph">
<p>Современные маршрутизаторы обычно содержат в своей прошивке встроенный прокси-DNS. Обычно это <a href="http://www.thekelleys.org.uk/dnsmasq/doc.html">DNSMASQ</a>. Некоторые прошивки маршрутизатора, такие как <a href="https://www.dd-wrt.com/">DD-WRT</a> и <a href="https://www.openwrt.org/">OpenWrt</a> (а также другие), позволяют настраивать встроенный DNS-прокси (например, см. <a href="https://www.dd-wrt.com/wiki/index.php/DNSMasq_-_DNS_for_your_local_network_-_HOWTO">Руководство DD-WRT DNSMASQ</a> или <a href="https://oldwiki.archive.openwrt.org/doc/howto/dhcp.dnsmasq">руководство OpenWrt DNSMASQ</a>).</p>
</div>
<div class="paragraph">
<p>В этом случае кошелек следует запускать на ПК со статическим IP-адресом в локальной сети, и DNSMASQ от маршрутизатора будет отправлять DNS-запросы на этот компьютер. Ниже приведены примеры строк конфигурации, которые необходимо добавить в dnsmasq.conf. В этом примере ПК, на котором запущен Emercoin, имеет IP-адрес в локальной сети 192.168.1.53.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>--server=/emc/192.168.1.53#5335
--server=/coin/192.168.1.53#5335
--server=/lib/192.168.1.53#5335
--server=/bazar/192.168.1.53#5335</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_общедоступный_интернет_прямой_шлюз">Общедоступный Интернет, прямой шлюз</h5>
<div class="paragraph">
<p>Также существует возможность сделать публичный шлюз из обычного дерева DNS в EmerDNS. В этом случае вы можете арендовать любой общедоступный домен или поддомен и указать NS-записи для этого домена на машину, на которой запущен кошелек Emercoin с активным DNS-сервером на порте 53 (см. В следующем абзаце, как определить порт). После этого все обычные запросы NS к этому домену будут обрабатываться DNS-сервером, а ответы будут получены из базы данных Emercoin NVS в кошельке Emercoin.</p>
</div>
<div class="paragraph">
<p>Чтобы настроить новый домен в качестве общедоступного DNS-шлюза Emercoin, вам необходимо указать DNS-серверы как авторитетные для вашей зоны (домена). Для домена emercoin.com мы указали два сервера имен (NS), уполномоченные для этого домена у нашего регистратора доменов:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Name Server: SEED1.EMERCOIN.COM
Name Server: SEED2.EMERCOIN.COM</pre>
</div>
</div>
<div class="paragraph">
<p>Вы можете проверить эту информацию с помощью <a href="https://www.computerhope.com/unix/uwhois.htm">whois</a>.</p>
</div>
<div class="paragraph">
<p>На каждом из этих серверов имен работает кошелек Emercoin с активным DNS-сервером, который обслуживает шлюз и локальную зону для emercoin.com. Специфические параметры конфигурации DNS для файла emercoin.conf следующие:</p>
</div>
<div class="paragraph">
<p>Если вы используете DNS-шлюз только для своего локального компьютера (с Acrylic или BIND) или для вашей локальной сети, достаточно указать только один параметр в emercoin.conf:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># enable emc dns
emcdns=1</pre>
</div>
</div>
<div class="paragraph">
<p>Это активирует DNS-сервер Emercoin и запустит его на порте по умолчанию 5335, что разрешено для перенаправления DNS с помощью DNS-прокси (Acrylic, BIND, dnsmasq и т. Д.).</p>
</div>
<div class="paragraph">
<p>Чтобы работать как общедоступный DNS-шлюз, вам необходимо указать некоторые дополнительные параметры:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Gateway suffix. This suffix will be ignored when a request is passed to the internal gateway.
# Requests for other domain suffixes will be ignored.
emcdnssuffix=.yourgate.com

# NS Server port 53 is the default NS port and must be used if the server is public and "not forward only".
emcdnsport=53

# Filter for allowed zones. Protection for "cool hackers", who try to lookup any external domains through our server
# or attack someone else by DNS amplification mechanism. Currently, only the four EMC-zones are allowed.
emcdnsallowed=.coin|.emc|.lib|.bazar

# Optional path for a file that contains names in the local gateway's NS zone (like www.emercoin.com).
# Must be full path. Example:
emcdnslocalcf=/usr/share/emercoin/emcdnslocal.conf</pre>
</div>
</div>
<div class="paragraph">
<p>Локальный файл конфигурации ( EmerDNSlocal.conf выше) содержит пары в формате «имя = значение» . Пустое имя предполагает «шлюз как есть». Значения используют тот же формат, что и значения EmerDNS в блокчейне. Например, локальный файл для youtgate.com выглядит следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># This is local zone config
# For built-in Emercoin DNS

=A=192.241.241.153|TXT=Emercoin site
www=A=192.241.241.153|TXT=Emercoin www-site</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_виртуальные_хосты_vhosts">2.1.6. Виртуальные хосты (vhosts)</h4>
<div class="paragraph">
<p>Когда вы запускаете <a href="https://ru.wikipedia.org/wiki/%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%85%D0%BE%D1%81%D1%82%D0%B8%D0%BD%D0%B3">виртуальные хосты</a>, вам необходимо будет изменить конфигурацию вашего веб-сервера, чтобы правильно различать ваше имя хоста с таким количеством возможных суффиксов шлюза, которое вы хотите (или без суффикса, если имя разрешено LAN или локально). Это легко сделать, создав псевдоним vname со звездочкой "*" в качестве суффикса. В следующем примере показана соответствующая конфигурация <a href="https://ru.wikipedia.org/wiki/Apache_HTTP_Server">веб-сервера Apache</a> для виртуального сервера exchange.emc . Обратите внимание на строку ServerAlias:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;VirtualHost *:80&gt;
  ServerAdmin okhovayko@verizon.net
  DocumentRoot "/var/www/exchange.emc/html"
  ServerName emc.cc.st
  ServerAlias exchange.emc*
  ErrorLog  "/var/log/exchange.emc-error_log"
  CustomLog "/var/log/exchange.emc-access_log" common
  ScriptAlias /cgi-bin/ "/usr/local/libexec/cgi-bin/"
&lt;/VirtualHost&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_получение_ssl_сертификатов_с_postmet">2.1.7. Получение SSL сертификатов с Postmet</h4>
<div class="paragraph">
<p>C 2021 года появилась возможность получить SSL сертификат для доменных зон Emercoin. На сайте postmet.com можно оставить заявку на выпуск сертификата, следуя инструкциям на их сайте:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Скачайте шаблон альтернативного имени Sublect (SAN) req_san_example.conf.</p>
</li>
<li>
<p>Отредактируйте этот пример, напишите свои фактические доменные имена (CN, DNS.n) или другое значение (Country, STate, Location, Orgznization)</p>
</li>
<li>
<p>Создайте запрос подписи сертификата (CSR) и файлы закрытого ключа с помощью команды:</p>
<div class="listingblock">
<div class="content">
<pre>openssl req -new -out domain.lib.csr -newkey rsa: 2048 -nodes -sha256 -keyout domain.lib.key -config req_san_example.conf</pre>
</div>
</div>
</li>
<li>
<p>Заполните форму с CSR и информацией о вас.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Скрипт генерации запроса CSR вы можете найти <a href="https://github.com/emercoin/emcssl/tree/master/PostmetSSL">здесь</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Для полноценной работы нужно добавить в доверенные вашей системы корневой сертификат CA Postmet. Когда вы добавляете самоподписной CA в браузер, вы доверяете ему, как будто он является доверенным центром сертификации. Это означает, что ваш браузер будет доверять любому сертификату, который будет подписан этим CA.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_emerssl">2.2. EmerSSL</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Совсем коротко о сути технологии</dt>
<dd>
<p>Вы размещаете в БЧ EmerNVS запись в которой поле <strong>key:</strong>
содержит серийный номер вашего сертификата x509. В поле <strong>value:</strong> хеш сумму <strong>sha256</strong> вашего сертификата.</p>
<div class="paragraph">
<p>Основное преимущество в том что вы можете в любой момент отозвать ваш сертификат путем обновления записи и изменения поля <strong>value:</strong> на хеш сумму нового сертификата, оставив поле <strong>key:</strong> неизменным, то есть ваш новый сертификат должен быть с точно таким же серийным номером.</p>
</div>
<div class="paragraph">
<p>Таким образом мы достигаем того что вы можете очень быстро отозвать свой сертификат, а все сервисы которые используют EmerSSL будут знать о том что пользователь с таким то серийным номером изменил сертификат и не примут сертификат со старой хеш суммой.</p>
</div>
</dd>
<dt class="hdlist1">Преимущества</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Эта полностью децентрализованная инфраструктура SSL-сертификатов исключает возможность MITM-атаки.</p>
</li>
<li>
<p>Многократное использования одного клиентского SSL-сертификата для авторизации на любом сервере в системе EmerSSL без ущерба для безопасности</p>
</li>
<li>
<p>Автозаполнение новой формы учетной записи данными, записанными в блокчейн.</p>
</li>
<li>
<p>Не нужен центр сертификации.</p>
</li>
<li>
<p>Можно использовать самоподписные сертификаты.</p>
</li>
<li>
<p>Вы можете отозвать сертификат мгновенно, без необходимости уведомлять об этом все сервисы которые вас аутентифицируют через него.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>На основе EmerSSL существует система беспарольной аутентификации на сайтах, использующая блокчейн Emercoin в качестве децентрализованного хранилища хеш-сумм для клиентских SSL-сертификатов. Сертификаты можно создавать прямо на своём компьютере, без вовлечения какого-либо центра сертификации, и при необходимости легко заменять. Так что ни плановые обновления, ни срочные отзывы скомпрометированных сертификатов не вызовут проблем.
Подробнее <a href="articles.html#emerssl-article">в этой статье</a></p>
</div>
<div class="paragraph">
<p>Преимущество EmerSSL заключается в полной децентрализации системы, то есть в отсутствии группы серверов, работающих под одной авторизацией (как в системах <a href="https://ru.wikipedia.org/wiki/Kerberos">Kerberos</a>, <a href="https://ru.wikipedia.org/wiki/OpenID">OpenID</a>, TeddyID и т.п.). Из-за этой децентрализации EmerSSL не может пострадать от сбоя общесистемного обслуживания либо из-за технического сбоя, либо из-за злонамеренной атаки на серверы авторизации. Кроме того, пользователь не может заблокировать свои учетные записи в глобальном масштабе по прихоти одного органа.</p>
</div>
<div class="paragraph">
<p>С технологией EmerSSL связана EmerSSL InfoCard - "визитная карточка" система, которая дополняет беспарольный вход в EmerSSL, позволяя автоматически заполнять профили веб-сайтов из данных, хранящихся в блокчейне Emercoin.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Дополнительные ресурсы по EmerSSL</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://emerssl.emercoin.com/">Набор инструментов EmerSSL</a></p>
</li>
<li>
<p><a href="files/EMCSSL.pdf">Техническая документация на английском</a></p>
</li>
<li>
<p><a href="https://www.drupal.org/project/emc_ssl">Модуль EmerSSL и Infocard для Drupal</a></p>
</li>
<li>
<p><a href="https://github.com/emercoin/emcssl">EmerSSL на Github</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_создание_сертификата_emerssl">2.2.1. Создание сертификата EmerSSL</h4>
<div class="paragraph">
<p>Запустите кошелек <strong>emercoin-qt</strong>, нажмите кнопку <strong>SSL</strong>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerssl-1.png" alt="emerssl 1">
</div>
</div>
<div class="paragraph">
<p>Нажмите кнопку "New certificate":</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerssl-2.png" alt="emerssl 2">
</div>
</div>
<div class="paragraph">
<p>Заполните поля. Введите ваше имя или ник и ваш email:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerssl-3.png" alt="emerssl 3">
</div>
</div>
<div class="paragraph">
<p>Придумайте и введите пароль для защиты сертификата:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerssl-4.png" alt="emerssl 4">
</div>
</div>
<div class="paragraph">
<p>Вам предложат установить сертификат в систему, нажмите "Yes"
и пройдите процедуру импорта для вашей OC. В процессе импорта вас попросят ввести пароль, используйте пароль который вы вводили ранее:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerssl-5.png" alt="emerssl 5">
</div>
</div>
<div class="paragraph">
<p>Данные сгенерированного сертификата. Здесь мы видим данные которые будут вставлены в соответствующие поля записи EmerNVS. Закройте окно:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerssl-6.png" alt="emerssl 6">
</div>
</div>
<div class="paragraph">
<p>Выберите период времени на который вы хотите разместить запись <strong>1, 2</strong>. Выберите тип размещения, новая запись или обновление уже существующей <strong>3</strong>. Нажмите "Submit" <strong>4</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerssl-7.png" alt="emerssl 7">
</div>
</div>
<div class="paragraph">
<p>Видео-инструкция: Как установить сертификат EmerSSL</p>
</div>
<div class="videoblock">
<div class="content">
<iframe src="https://www.youtube.com/embed/5Ci1PnSbVxY?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
В примере указана ныне не существующая биржа Livcoin, но порядок действий по созданию сертификата это не влияет.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Вы можете поверить работоспособность сертификата, например на FoundICO (Меню "Войти")</p>
</div>
</div>
<div class="sect3">
<h4 id="_infocard">2.2.2. InfoCard</h4>
<div class="paragraph">
<p><strong>EmerSSL InfoCard</strong> - это децентрализованная распределенная "визитная карточка" система на блокчейне Emercoin, которая дополняет систему EmerSSL для входа без пароля, позволяя автоматически заполнять профили веб-сайтов. InfoCard позволяет организовать информацию в иерархическую структуру, что может быть полезно для быстрого обновления содержимого всех карточек в компаниях или других организациях.</p>
</div>
<div class="paragraph">
<p><strong>InfoCard</strong> - это своего рода "система визитных карточек на блокчейне" , которая содержит информацию о ее владельце, такую ​​как адрес электронной почты, номер телефона, дату рождения и т. д. InfoCard можно использовать на сайтах с авторизацией EmerSSL для автоматического заполнения данных учетной записи. Это означает, что вместо того, чтобы каждый раз вводить личные данные вы создаете новую учетную запись в Интернете, вы можете предоставить свою виртуальную визитную карточку InfoCard для заполнения данных.</p>
</div>
<div class="sect4">
<h5 id="_создание_infocard">Создание InfoCard</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://emerssl.emercoin.com/">Загрузите</a> необходимые скрипты (или просмотрите <a href="https://github.com/emercoin/emcssl" class="bare">github.com/emercoin/emcssl</a> для последней версии для разработки).</p>
</li>
<li>
<p>Переименуйте файл <strong>infocard_example.info</strong> в <strong>infocard_&lt;your_login_name&gt;.info</strong> и измените данные на свои собственные. Если вы предпочитаете не предоставлять данные для некоторых вещей, просто удалите строку. Примеры данных:</p>
<div class="listingblock">
<div class="content">
<pre>Alias superabdul # Short name (username, login)
FirstName Abdul # First (short) name
LastName Kurbashi Bey # Remain part of full name
HomeAddress
Sinan Pasa Mah. Hayrettin Iskelesi # Free form address
Sok. No \#1 # Free form address
Besiktas, Besiktas # Free form address
Istanbul # City
34353 # ZIP code
Turkey # Country
HomePhone +90-555-123-4567
WorkPhone +90-555-123-4568
CellPhone +90-555-123-4569
Gender M
Birthdate 1991-05-27 # May, 27, 1991
Email abdul@bubbleinflators.com
WEB http://www.bubbleinflators.com/superabdul
Facebook Abdul.KurbashiBey
Twitter AbdulKurbashiBey
EMC EdvJ7b7zPL6gj5f8VNfX6zmVcftb35sKX2 # Emercoin payment address
BTC 1MkKuU78bikC2ACLspofQZnNb6Vz9AP1Np # BitCoin payment address</pre>
</div>
</div>
</li>
<li>
<p>Перейдите в папку <strong>X509</strong> и запустите <strong>info_crypt.sh</strong>:</p>
<div class="listingblock">
<div class="content">
<pre>$ cd downloads/X509
$ ./info_crypt.sh infocard_&lt;your_login_name&gt;.info</pre>
</div>
</div>
<div class="paragraph">
<p>В Windows запустите, дважды щелкнув файл info_crypt.bat и введите имя InfoCard:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/windows_console.png" alt="windows console">
</div>
</div>
<div class="paragraph">
<p>Если все пойдет хорошо, вывод будет содержать следующее сообщение:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Please, deposit into Emercoin NVS pair:
Key: info:e120319a479f4ac4
Value: body of the file: infocard_&lt;your_login_name&gt;.info.ze

To link your EmerSSL certificate to this info file, run ./gen_tpl.sh and use value for UID: info:e120319a479f4ac4:ac7c3821f171b6a8bd8cd33d829f5b</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Обратите внимание, что эта информация нигде не хранится, поэтому рекомендуется вести запись в текстовом документе.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Следующим шагом будет импорт визитки в сеть. Для этого откройте кошелек и перейдите на вкладку «Управление именами». В поле Name скопируйте наш ключ, <strong>info:e120319a479f4ac4</strong>. В поле Value вставьте содержимое файла * .ze, который должен находиться в папке скриптов. Содержимое файла будет выглядеть тарабарщиной - и должно быть, это нормально. Поле New Adress следует оставить пустым.</p>
<div class="imageblock">
<div class="content">
<img src="images/infocard1.png" alt="infocard1">
</div>
</div>
<div class="paragraph">
<p>Нажмите Submit, и все готово!</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_emerssh">2.3. EmerSSH</h3>
<div class="paragraph">
<p>Используете серверную PKI? Представьте, что случится, если вашему администратору захочется пошалить.</p>
</div>
<div class="paragraph">
<p>С EmerSSH вы в безопасности.</p>
</div>
<div class="paragraph">
<p>Благодаря децентрализации, никто не сможет получить ключ к вашему корневому сертификату и таким образом расшировать передаваемые данные.</p>
</div>
<div class="paragraph">
<p>EmerSSH можно бесшовно связать с OpenSSH, получив гибкость в дополнение к безопасности.</p>
</div>
<div class="paragraph">
<p>EmerSSH — система для управления PKI и <a href="https://en.wikipedia.org/wiki/Access_control_list">Access-Control List</a> (ACL) на базе блокчейна Emercoin.</p>
</div>
<div class="paragraph">
<p>Если EmerSSH связать с Open SSH, вы получите удобный, безопасный и гибкий способ SSH-подключения ко многим серверам. Для этого в OpenSSH надо указать ссылку на утилиту “emcssh”, которая будет «общаться» с блокчейном и получать SSH-креды в процессе аутентификации.</p>
</div>
<div class="paragraph">
<p>Добавлять и изменять записи об открытых ключах в блокчейне можно через GUI или командную строку. Таким же образом можно управлять группами пользователей, которые могут в свою очередь ссылаться на другие группы или отдельных пользователей, организовывая рекурсивные деревья для аутентификации.</p>
</div>
<div class="paragraph">
<p>В рамках NVS система работает под абревиатурой SSH.</p>
</div>
<hr>
<div class="paragraph">
<p>Можно создать мост между OpenSSH и блокчейном криптовалюты Emercoin. Результатом является удобный, безопасный и очень гибкий способ входа на множество серверов с использованием протокола SSH.</p>
</div>
<div class="paragraph">
<p>Простая программа <a href="https://github.com/emercoin/emcssh">EmerSSH</a> обеспечивает мост между <a href="https://ru.wikipedia.org/wiki/OpenSSH">OpenSSH</a> и блокчейном Emercoin, обеспечивая безопасное децентрализованное управление PKI. Когда OpenSSH настроен для обращения к EmerSSH , программа будет запрашивать блокчейн Emercoin для получения учетных данных SSH во время процесса аутентификации.</p>
</div>
<div class="paragraph">
<p>Пользователи могут управлять своими собственными учетными данными (открытыми ключами), отправляя и изменяя записи в цепочке блоков EMC (с помощью стандартного графического интерфейса Emercoin или демона командной строки. Аналогичным образом администраторы могут управлять группами пользователей для своих служб, которые могут содержать ссылки на другие группы как а также отдельных пользователей, что позволяет создавать рекурсивные деревья аутентификации.</p>
</div>
<div class="paragraph">
<p>EmerSSH работает под аббревиатурой SSH в Emercoin NVS. Записи считаются безопасными и неизменными из-за безопасности, <a href="https://emercoin.com/ru/documentation/introduction/security-principles/">обеспечиваемой</a> блокчейном Emercoin.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Преимущества</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Децентрализация авторизации и, как следствие, повышенной безопасности</p>
</li>
<li>
<p>Автоматическое обновления ключей и групп без помощи администратора</p>
</li>
<li>
<p>Абсолютное доверие между распределенными участниками инфраструктуры</p>
</li>
<li>
<p>Легкое администрирование и использование</p>
</li>
<li>
<p>Удешевление поддержки инфраструктуры и ее администрирования</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_установка">2.3.1. Установка</h4>
<div class="paragraph">
<p>Ниже приведены инструкции по установке и настройке EmerSSH на Debian и производных серверах, таких как Ubuntu, а также по использованию EmerSSH для входа на сервер с клиентского компьютера. Мы предполагаем, что на вашем сервере уже запущен кошелек Emercoin.
Установка необходимых пакетов на сервер</p>
</div>
<div class="paragraph">
<p>Сначала обновите существующее программное обеспечение:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ apt-get update
$ apt-get dist-upgrade</pre>
</div>
</div>
<div class="paragraph">
<p>Теперь установите curl и jansson:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ apt-get install libcurl4-openssl-dev libjansson-dev</pre>
</div>
</div>
<div class="paragraph">
<p>Далее вам необходимо скачать и установить EmerSSH:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ wget https://github.com/emercoin/emcssh/archive/0.0.4.tar.gz  (change to whatever is the latest release)
$ tar xfz 0.0.4.tar.gz
$ cd EmerSSH-0.0.4
$ make
$ make install</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_настройка_emerssh">2.3.2. Настройка EmerSSH</h4>
<div class="paragraph">
<p>Теперь вам нужно отредактировать файл конфигурации:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/usr/local/etc/emercoin/EmerSSH.conf</pre>
</div>
</div>
<div class="paragraph">
<p>и изменить настройку для emcurl. Настройки должны совпадать с настройками в вашем файле <strong>emercoin.conf</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ nano /usr/local/etc/emercoin/EmerSSH.conf</pre>
</div>
</div>
<div class="paragraph">
<p>Измените значение для emcurl:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>emcurl http://emccoinrpc:rpcpassword@127.0.0.1:6662/</pre>
</div>
</div>
<div class="paragraph">
<p>Значения emccoinrpc и rpcpassword должны быть взяты из вашего файла emercoin.conf . Остальные параметры можно оставить как есть.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
EmerSSH.conf файл должен иметь права на чтение и запись только для пользователя root. Не изменяйте разрешения для этого файла, поскольку он содержит расширение rpcpassword.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Затем вам нужно отредактировать файл конфигурации sshd, но у Debian есть небольшая проблема в том, что версия sshd может быть слишком старой и ее сначала необходимо обновить. Пользователи других операционных систем могут пропустить следующий шаг.</p>
</div>
<h5 id="_обновление_openssh_в_debian" class="discrete">Обновление OpenSSH в Debian</h5>
<div class="paragraph">
<p>Для начала узнаем, какая версия OpenSSH установлена:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ sshd -v</pre>
</div>
</div>
<div class="paragraph">
<p>В ответ мы получаем следующее сообщение:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>unknown option -- v
OpenSSH_6.1p1 Debian</pre>
</div>
</div>
<div class="paragraph">
<p>Если версия 6.2 или выше, следующий шаг можно пропустить. В противном случае обновите:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ nano /etc/apt/sources.list</pre>
</div>
</div>
<div class="paragraph">
<p>Добавьте в конец строки и сохраните файл:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ deb http://ftp.debian.org/debian/ wheezy-backports main non-free contrib</pre>
</div>
</div>
<div class="paragraph">
<p>Обновите систему:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ apt-get update</pre>
</div>
</div>
<div class="paragraph">
<p>и установите sshd:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ apt-get -t wheezy-backports install openssh-server</pre>
</div>
</div>
<div class="paragraph">
<p>Сценарий установки спрашивает, отключить ли аутентификацию по паролю. Лучший ответ - не иметь возможности входить в систему традиционным способом.</p>
</div>
<div class="paragraph">
<p>Кроме того, пользователям Debian нужно будет изменить расположение файла EmerSSH:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mv /usr/local/sbin/EmerSSH /usr/sbin/EmerSSH</pre>
</div>
</div>
<h5 id="_настройка_openssh" class="discrete">Настройка OpenSSH</h5>
<div class="paragraph">
<p>Теперь нам нужно отредактировать файл конфигурации sshd_config:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ nano /etc/ssh/sshd_config</pre>
</div>
</div>
<div class="paragraph">
<p>Необходимо добавить несколько строк:</p>
</div>
<div class="paragraph">
<p>Debian:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>AuthorizedKeysCommand /usr/sbin/EmerSSH
AuthorizedKeysCommandUser root</pre>
</div>
</div>
<div class="paragraph">
<p>Для других OS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>AuthorizedKeysCommand /usr/local/sbin/EmerSSH
AuthorizedKeysCommandUser root</pre>
</div>
</div>
<div class="paragraph">
<p>Теперь перезапустите sshd с новой конфигурацией:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ kill -HUP `cat /var/run/sshd.pid`</pre>
</div>
</div>
<h5 id="_создайте_пару_ключей_ssh" class="discrete">Создайте пару ключей SSH</h5>
<div class="paragraph">
<p>Теперь нам нужно сгенерировать пару ключей для пользователя. В Linux просто введите следующую команду:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ssh-keygen -t rsa -b 4096 -C "@your-username"</pre>
</div>
</div>
<h6 id="_добавление_открытого_ключа_в_emercoin_nvs" class="discrete">Добавление открытого ключа в Emercoin NVS</h6>
<div class="paragraph">
<p>Затем нам нужно добавить открытый ключ в Emercoin NVS в виде пары имя &#8594; значение. Сделайте это в своем кошельке Emercoin на своем ПК.
В поле name укажите:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ssh:&lt;your_username&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>В поле value вставьте свой открытый ключ от PuTTYgen. Поле new address можно оставить пустым. Укажите количество дней и нажмите «Submit».</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerssh_wallet.png" alt="emerssh wallet">
</div>
</div>
<div class="paragraph">
<p>Теперь нам нужно дождаться подтверждения нашей транзакции. Чтобы сэкономить время при ожидании подтверждения, теперь вы можете вернуться на свой сервер и добавить нового пользователя в файл <strong>EmerSSH_keys</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd $HOME/.ssh/
$ nano EmerSSH_keys</pre>
</div>
</div>
<div class="paragraph">
<p>В документе просто добавьте своего пользователя с помощью @. В моем случае это:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@kamillo</pre>
</div>
</div>
<div class="paragraph">
<p>Сохраните и закройте файл.</p>
</div>
<div class="paragraph">
<p>Следует отметить, что технология EmerSSH от Emercoin позволяет использовать не только отдельных пользователей, но и целые группы. Допустим, вы хотите предоставить доступ к своим серверам трем другим людям. Вы можете индивидуально добавить всех пользователей в файл EmerSSH_keys , но это неудобно, потому что каждый раз, когда вы добавляете или удаляете пользователя, вам нужно будет редактировать этот файл на всех серверах. Однако есть более универсальный и простой способ. Просто создайте запись в блокчейне Emercoin, например kamilloFriends, и перечислите всех своих друзей. Поля для такой записи следующие:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"name" : "ssh:kamilloFriends"
"value" : "@kamillo|@friend1|@friend2|@friend3"</pre>
</div>
</div>
<div class="paragraph">
<p>Если вам нужно добавить или удалить кого-то из группы, достаточно будет сделать Name_Update для этой записи в кошельке Emercoin. Таким образом, если в файле EmerSSH_keys я укажу группу @kamilloFriends, система сможет авторизовать любого из моих друзей.</p>
</div>
<h5 id="_проверка_работоспособности" class="discrete">Проверка работоспособности</h5>
<div class="paragraph">
<p>Чтобы убедиться, что все работает должным образом, выполните следующую команду:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ EmerSSH &lt;username&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>На моем тестовом сервере я работаю от пользователя root, поэтому команда для моего имени пользователя будет:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ EmerSSH root</pre>
</div>
</div>
<div class="paragraph">
<p>В ответ мы получаем следующее сообщение:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#INFO: verbose=2; maxkeys=4096 recursion=30 EmerSSH_keys=/root/.ssh/EmerSSH_keys; emcurl=@127.0.0.1:8775/
#Path=/
#Path=/kamillo/
ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAgEAgmzL............</pre>
</div>
</div>
<div class="paragraph">
<p>Как и ожидалось. Все работает. Теперь попробуем авторизоваться.</p>
</div>
<div class="paragraph">
<p>Не закрывая текущий сеанс, разрешите PuTTY войти в систему без пароля. Для этого откройте новое окно PuTTY, введите IP-адрес вашего сервера, затем перейдите к SSH&gt; Auth в PuTTY:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerssh-03.png" alt="emerssh 03">
</div>
</div>
<div class="paragraph">
<p>Нажмите Browse &#8230;&#8203; и укажите путь к вашему закрытому ключу.</p>
</div>
<div class="paragraph">
<p>На вкладке Connection &#8594; Data мы можем указать пользователя, под которым мы хотим подключиться. Если не указано иное, не беспокойтесь - в этом случае сервер запросит имя пользователя при подключении.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerssh-04.png" alt="emerssh 04">
</div>
</div>
<div class="paragraph">
<p>Нажмите «Open» и подключитесь к серверу. Если он подключается, поздравляю, у вас все получилось!</p>
</div>
<div class="paragraph">
<p>Если по какой-либо причине соединение не удается, откройте окно предыдущего сеанса и введите следующую команду:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cat /var/log/auth.log</pre>
</div>
</div>
<div class="paragraph">
<p>Внимательно ищите там сообщения об ошибках и ищите решения проблемы. И если вы не можете это исправить, обратитесь за помощью.</p>
</div>
<div class="paragraph">
<p>Наконец, вот еще одна полезная команда, которая показывает, когда посетители входят в систему:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ grep "Accepted publickey" /var/log/auth.log</pre>
</div>
</div>
<h5 id="_дополнительная_информация_для_пользователей_macos_x" class="discrete">Дополнительная информация для пользователей MacOS X</h5>
<div class="paragraph">
<p>Чтобы иметь возможность войти на сервер с поддержкой EmerSSH через терминал в OS X, вам сначала необходимо преобразовать свой закрытый ключ в желаемый формат. Конвертирование делал в Windows через программу PuTTYgen. Лучше установить пароль для вашего ключа, так как OS X будет жаловаться на это (в будущем вам нужно будет вводить пароль только один раз).</p>
</div>
<div class="paragraph">
<p>Запускаем PuTTYgen, нажимаем Load и выбираем наш ключ * .ppk. Затем установите пароль в Key passphrase и Confirm passphrase. Переходим во вкладку Conversions и экспортируем ключ в формате OpenSSH:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerssh-05.png" alt="emerssh 05">
</div>
</div>
<div class="paragraph">
<p>Теперь мы хотим добавить ключ в систему OS X. Откройте терминал и перейдите в папку, в которую вы экспортировали ключ. У меня есть папка Ключи:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd Keys</pre>
</div>
</div>
<div class="paragraph">
<p>Установите ключ только для чтения, иначе система пожалуется:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ chmod 0400 &lt;your_key_file&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Добавьте ключ:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ssh-add &lt;your_key_file&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>В ответ мы получаем сообщение о том, что идентификатор был добавлен. Проверяем соединение командой:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ssh root@&lt;your_server_ip&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Если сервер не запрашивает пароль, значит, все в порядке.</p>
</div>
<div class="paragraph">
<p>Больше информации вы можете найти в статье: <a href="https://medium.com/@emer.tech/what-is-emerssh-faq-d38a6a0d073c">Что такое EmerSSH?</a> FAQ(Eng).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_emerdpo">2.4. EmerDPO</h3>
<div class="paragraph">
<p>Чем бы вы ни владели, соответствующие данные обычно хранятся в централизованных базах данных — открытые для всевозможного «централизованного» манипулирования. EmerDPO устроен по-другому.</p>
</div>
<div class="paragraph">
<p>Он представляет собой децентрализованную «картотеку» сертификатов собственности, в которой нет единого центра управления.</p>
</div>
<div class="paragraph">
<p>Будь то права собственности на землю, автомобили или софт — с EmerDPO вы можете всегда быть уверенными, что всё, чем вы завладели, останется документированно вашим.</p>
</div>
<div class="paragraph">
<p>При помощи блокчейна Emercoin EmerDPO позволяет децентрализованно подтверждать собственность и достоверность как физических, так и цифровых товаров и услуг. В рамках NVS система работает под абревиатурой “dpo”.</p>
</div>
<div class="paragraph">
<p>Подтверждение собственности — щекотливая тема во многих областях, от софта до недвижимости и от транспорта до искусства. Делать это через «бумажные» сертификаты накладно и чревато мошенничеством, подделками и даже кражами.</p>
</div>
<div class="paragraph">
<p>Блокчейн Emercoin же позволяет однозначно относить как физические, так и цифровые товары к собственности того или иного владельца.</p>
</div>
<div class="paragraph">
<p>Узнайте больше о подтверждении достоверности и собственности при помощи EmerDPO на сайте emcdpo.info.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/emerdpo_big.png" alt="emerdpo big">
</div>
</div>
<div class="paragraph">
<p>EmerDPO - это децентрализованное решение для проверки цифрового доказательства владения (подлинности) как физических, так и цифровых товаров и услуг с использованием блокчейна Emercoin. EmerDPO работает под аббревиатурой «dpo» в Emercoin NVS .</p>
</div>
<div class="paragraph">
<p>При использовании технологии pre-blockchain существует множество проблем с подтверждением прав собственности в ключевых областях экономической деятельности, таких как лицензии и подписки на программное обеспечение, права собственности на землю и документы, музыка, произведения искусства, бриллианты, регистрация транспортных средств и многое другое. Традиционные методы, используемые для подтверждения прав собственности с помощью письменных записей и лицензионных ключей, обременительны и открывают возможность мошенничества, подделки и даже кражи.</p>
</div>
<div class="paragraph">
<p>Благодаря аутсорсингу фактора доверия к блокчейну Emercoin физические и цифровые товары теперь могут быть закреплены за неизменным доказательством права собственности их соответствующим владельцам.</p>
</div>
<div class="paragraph">
<p>Цифровое доказательство владения решает множество реальных проблем, связанных с проверкой и аутентификацией продуктов и услуг.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Больше информации</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://habr.com/ru/articles/322696/">Как защитить</a> свою продукцию от подделки с помощью блокчейна.</p>
</li>
<li>
<p>Узнайте о <a href="https://emercoin.com/ru/documentation/blockchain-services/emerdpo/emerdpo-sn-publisher/">SN-Publisher</a>, утилите для автоматизации вставки серийных номеров EmerDPO в блокчейн Emecoin</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="videoblock">
<div class="content">
<iframe src="https://www.youtube.com/embed/Llh4GoLbiaI?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_enumer">2.5. ENUMER</h3>
<div class="imageblock">
<div class="content">
<img src="images/enumer_big.png" alt="enumer big">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D0%BB%D0%B5%D1%84%D0%BE%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D0%B5%D1%82%D1%8C_%D0%BE%D0%B1%D1%89%D0%B5%D0%B3%D0%BE_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F">PSTN</a>&#8201;&#8212;&#8201;Public Switched Telephone Network</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_описание">2.5.1. Описание</h4>
<div class="paragraph">
<p>В мире всё большее применение находит IP-телефония, которая обладает рядом преимуществ по сравнению с классической. IP-решения как правило дешевле классических и обладают большей функциональностью. В настоящее время IP ATC находят применение в различных организациях, но основные телефонные сети продолжают использовать классические решения, пусть даже и на базе цифровых АТС. В результате такого положения вещей, связь даже между двумя IP ATC происходит через обычную телефонную сеть, PSTN. Рассмотрим пример:</p>
</div>
<div class="paragraph">
<p>Пусть у нас есть организация «Покупатель», и другая организация, «Продавец». Обе организации используют для своих внутренних нужд IP ATC (также называемые PBX). Пусть сотрудник Покупателя нашёл в рекламе объявление Продавца, которое его заинтересовало. Покупатель решил позвонить Продавцу, и набирает его номер. Вызов происходит следующим образом:</p>
</div>
<div class="paragraph text-center">
<p>Телефон покупателя<br>
&#8595;<br>
PBX Покупателя<br>
&#8595;<br>
Цепочка провайдеров PSTN<br>
&#8595;<br>
PBX Продавца<br>
&#8595;<br>
Телефон Продавца</p>
</div>
<div class="paragraph">
<p>При этом звонке, происходит соединение двух IP ATC через цепочку PSTN провайдеров, и соответственно покупатель платит за звонок провайдеру, который перенаправляет звонок из VOIP-сети в PSTN-сеть (приземляет звонок). Ну а далее идут взаимозачёты между PSTN-провайдерами, которые нас не интересуют.</p>
</div>
<div class="paragraph">
<p>Если бы IP_AC_покупателя «знала бы дорогу», она могла бы через Интернет напрямую соединиться с IP_ATC_продавца, и тем избавила бы покупателя от платежа PSTN-приземлятелю, и звонок бы вышел бесплатным:</p>
</div>
<div class="paragraph text-center">
<p>Телефон покупателя<br>
&#8595;<br>
PBX Покупателя<br>
&#8595;<br>
PBX Продавца<br>
&#8595;<br>
Телефон Продавца</p>
</div>
<div class="paragraph">
<p>Да и надёжность и качество соединения было бы значительно выше, так как в такой цепочке и меньше промежуточных элементов, и перекодирований голосового трафика.</p>
</div>
<div class="paragraph">
<p>Понятно, что «знать все дороги», то есть поддерживать всевозможную карту прямых IP-соединений весьма трудоёмко, и был разработан сетевой протокол преобразования номера телефона в «дорогу», то есть в URI, который назвали ENUM.</p>
</div>
</div>
<div class="sect3">
<h4 id="_enum">2.5.2. ENUM</h4>
<div class="paragraph">
<p>Протокол ENUM (<a href="https://www.rfc-editor.org/rfc/rfc6116">rfc6116</a>) работает как распределённая адресная книга, и позволяет по номеру телефона «найти дорогу» к соответствующей IP ATC, которая обслуживает этот номер. Описание протокола: <a href="https://en.wikipedia.org/wiki/Telephone_number_mapping" class="bare">en.wikipedia.org/wiki/Telephone_number_mapping</a></p>
</div>
<div class="paragraph">
<p>Идея использования протокола состоит в следующем:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Продавец регистрирует свою IP ATC (PBX) в системе ENUM.</p>
</li>
<li>
<p>При звонке IP ATC покупателя перед использования PSTN-сети пытается найти «короткую дорогу», для чего делает запрос в систему ENUM.</p>
</li>
<li>
<p>Если в системе есть «короткий путь» — АТС покупателя использует его. Если же нет — то она использует стандартный путь, через PSTN, и платит за приземление звонка обычным образом.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_преимущества_enum">Преимущества ENUM</h5>
<div class="paragraph">
<p>Использование ENUM даёт выгоду как для инициатора, так и для получателя звонка. Для них это:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Улучшение качества сигнала за счёт прямого цифрового соединения.</p>
</li>
<li>
<p>Повышенная скорость и надёжность соединения.</p>
</li>
<li>
<p>Обход лимита PSTN-оператора на количество линий или использованных минут.</p>
</li>
<li>
<p>Невозможна ситуация отказа в обслуживании по причине перегрузки оператора.</p>
</li>
<li>
<p>Для звонящего — звонок всегда бесплатен (прямая экономия).</p>
</li>
<li>
<p>Для получателя — бесплатен тоже, даже если у него toll-free number, когда он должен платить за входящие (тоже экономия).</p>
</li>
<li>
<p>Использование ENUM происходит автоматически, незаметно для пользователей, и требует только минимального конфигурирования IP ATC.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Протокол ENUM прост и легковесен, технически эффективен, и все наиболее популярные IP ATC его поддерживают. Тем не менее, широкого распространения от не получил, и тому есть ряд причин организационно-экономического характера, ставшими проблемами для широкого внедрения. Рассмотрим их подробнее.</p>
</div>
</div>
<div class="sect4">
<h5 id="_проблемы_текущих_реализаций_enum">Проблемы текущих реализаций ENUM</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Первая проблема ENUM — то, что сейчас просто нет такого места, где бы владелец обычной IP ATC мог бы зарегистрировать свой номер (или несколько номеров) и соответствующие SIP URI. Вернее — такие места были, например, freenum.org или e164.org. Но freenum давно недоступен, а e164.org прекратил работу в ноябре 2016. Да, где-то продолжают какое-то существование ENUM-сервера типа e164.arpa. Но это сервис — не для владельцев IP ATC или частных лиц, а «межпровайдерный узел», где крупные и взаимно проверенные VOIP-провайдеры дают информацию о возможности приземления в их сети. Эдакий «междусобойчик для своих», куда обычному владельцу IP ATC дороги нет.</p>
</li>
<li>
<p>Вторая проблема — критическая зависимость работы сети от централизованного сервиса, который может вести себя некорректно, или вообще не работать. Наглядный тому пример — e164.org. В последние 2 года — работал нестабильно, и кроме того, занимался непотребством, например — несмотря на зарегистрированные у него toll-free номера, направлял трафик не на IP ATC абонентов, а на «своих приземлятелей», которые естественно не забывали выставлять счета за доставленный по PSTN-сети звонки. Естественно, это поведение приводило к тому, что у владельцев toll-free номеров пропадал экономический стимул регистрировать эти номера в e164.org.
А примерно за месяц до закрытия — e164.org вообще перестал отдавать ENUM-ответы, несмотря на то, что записи в нём содержались корректные (мы проверяли).</p>
</li>
<li>
<p>Так как классическая централизованная ENUM-система пользуется транспортом DNS, она уязвима против всевозможных атак на инфраструктуру DNS, таких как <a href="https://ru.wikipedia.org/wiki/DNS_spoofing">DNS-Spoofing</a>, <a href="https://ru.wikipedia.org/wiki/DNS_hijacking">DNS-hijacking</a>, и им подобных. Естественно, сбои в DNS-системе также приводят к отказу в обслуживании и в системе ENUM.</p>
</li>
<li>
<p>Ну и последнее, но важное: Нагрузка на такой сервер получается весьма большой, ибо запрос делается при попытке каждого звонка с IP ATC. Да, запросы кэшируются промежуточными DNS-серверами, но тем не менее — нагрузка всё равно остаётся высокой для сервера, обслуживающего все телефонные станции всего мира. Как следствие — отказы в обслуживании или задержки с обработкой запросов, а также высокая цена серверной инфраструктуры.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Вышеназванные причины «провала» имеют организационно-технический характер, проистекающий из централизованной организации сервиса и непрозрачности алгоритма разрешения запроса. Действительно, централизованная реализация ENUM, как и любого сетевого сервиса, зависит от работоспособности сайта, который обслуживает создание ENUM-записей и поддержку их актуальными, а также соответствующего DNS-сервера, который разрешает ENUM-запросы. Иными словами, доверие к такой ENUM-системе не может превышать доверия к организации, которая управляет этой системой. Доверие также снижает тот факт, что совершенно неизвестен алгоритм и критерии, по которым тот или иной централизованный сервис разрешает ENUM-запросы. Так, например, сегодня он может работать как надо, а завтра — перенаправлять куда следует звонки на некий номер, интересующий компетентных товарищей (которым дело до всего). Например, на промежуточный VOIP-узел, который в свою очередь может сделать с трафиком всякое. Почему вдруг перенаправлять? Ну может быть, владелец номера играет джаз…</p>
</div>
<div class="paragraph">
<p>Соответственно, выход из строя такого сервиса приводит к одномоментному останову всей сети. Оба эти недостатка в полной мере продемонстрировал e164.org: сначала перенаправлял toll-free звонки не на зарегистрированные номера, а на своего провайдера-приземлятеля, потом вообще отвечал пустыми ответами, а в завершение эпопеи вышел из бизнеса, со всеми базами.</p>
</div>
</div>
<div class="sect4">
<h5 id="_enumer_децентрализованный_enum">ENUMER — децентрализованный ENUM</h5>
<div class="paragraph">
<p>Для решения указанных выше проблем мы разработали децентрализованную систему ENUM на базе блокчейна Emercoin. Проект получил название «ENUMER», произошедшее от слов «ENUM» и «Emer». Кратко говоря: ENUM+EMER=ENUMER.</p>
</div>
<div class="paragraph">
<p>Криптовалюты являются трендом современной финансовой индустрии, и в настоящее время активно развиваются. Основой же всех криптовалют, включая Emercoin, является блокчейн — распределённая доверенная публичная база данных платёжных операций.</p>
</div>
<div class="paragraph">
<p>Особенностью Emercoin является NVS (Name-Value Storage) — распределённое доверенное хранилище информации общего назначения. То есть каждый участник сети имеет достоверную локальную копию всего блокчейна, и следовательно — всего содержимого NVS, а доверие к содержимому NVS, также как и всему блокчейну, создаётся посредством консолидированных усилий майнеров доказательства работы POW и доказательства доли POS.</p>
</div>
<div class="paragraph">
<p>На базе этого хранилища уже созданы и эксплуатируются системы безопасности emerSSH/emerSSL, а также неуязвимая децентрализованная система доменных имён EmerDNS.</p>
</div>
<div class="paragraph">
<p>Данный проект децентрализованного ENUM основан на системе EmerDNS, и обладает следующими преимуществами перед классической централизованной реализацией ENUM:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Высокая скорость разрешения ENUM-запросов в силу локальности их обработки.</p>
</li>
<li>
<p>Высокая надёжность обработки запроса. Даже в случае потери соединения с другими участниками сети, запросы будут продолжать разрешаться через локальную копию блокчейна.</p>
</li>
<li>
<p>Анонимность ENUM-запросов. Так как запросы не покидают локального компьютера или доверенной локальной сети, никто снаружи не может узнать, что происходит и кого вообще ищут.</p>
</li>
<li>
<p>Невозможность атаки на DNS-инфраструктуру вследствие отсутствия таковой [3].</p>
</li>
<li>
<p>В силу истинной децентрализации сети, доверие к сети не зависит от доверия к какой-либо одной компании. Невозможна ситуация, когда вся система будет остановлена по решению кого-либо одного [2]. Сеть ENUM будет продолжать работать, пока сотни независимых майнеров закрывают блоки и подтверждают консенсус блокчейна.</p>
</li>
<li>
<p>Алгоритм обработки ENUM-запроса выполняется на стороне запрашивающего. Программный код, который это делает, доступен на <a href="https://github.com/emercoin">Github</a>, и может быть проанализирован кем угодно на предмет корректности. Невозможна ситуация, когда ENUM-сервер меняет правила по ходу игры. То есть запрашивается собственный локальный сервер посредством локального соединения (или через доверенную сеть).</p>
</li>
<li>
<p>В силу децентрализованности пиринговой сети Emercoin, она масштабируется неограниченно. Следовательно, нет «узкого горла», в котором фокусируются запросы со всего мира. Каждый может поставить себе сколько угодно независимых узлов EmerCoin, и разрешать свои ENUM-запросы на этом кластере. То есть решена проблема [4].</p>
</li>
<li>
<p>ENUM-записи создаются и модифицируются самими же пользователями, через локальный кошелёк EmerCoin. Таким образом, не требуется сервер или другое место [1], куда надо вносить информацию. Каждый пользователь делает это у себя локально, а «место, куда сообщать о себе» — становится просто не нужным. Каждый сообщает своему локальному кошельку, а тот уже транслирует ENUM-запись в пиринговую сеть.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В результате, получаем систему:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Быструю</p>
</li>
<li>
<p>Надёжную</p>
</li>
<li>
<p>Защищённую</p>
</li>
<li>
<p>Масштабируемую</p>
</li>
<li>
<p>Не зависящую критически от кого бы то ни было</p>
</li>
<li>
<p>Не подверженную выходу из строя вследствие волюнтаристского решения</p>
</li>
<li>
<p>Без возможности блокировки неугодных</p>
</li>
<li>
<p>С прозрачным алгоритмом разрешения запросов</p>
</li>
<li>
<p>С возможность управления записью через локальный кошелёк, а не «сервер в интернете»</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Но при таких впечатляющих преимуществах, децентрализованный ENUM имеет и свои специфические проблемы, связанные с публичной доступностью инфраструктуры. Так, кто угодно может создать запись с любым содержимым, и захватить запись, соответствующую чужому телефонному номеру, и её содержимым либо заблокировать ENUM-доступ для истинного хозяина телефона, либо того хуже — перенаправить звонок куда-либо не туда. Звонишь, например, в прачечную, а попадаешь в министерство культуры…</p>
</div>
<div class="paragraph">
<p>Для предотвращения подобных злоупотреблений, в системе предусмотрены верификаторы. Это агенты, которые проверяют, что та или иная ENUM-запись действительно принадлежит владельцу соответствующего номера, и после этого передают владельцу ENUM-записи подпись — вердикт того, что запись верная, и ею можно пользоваться. Также с целью пресечения злоупотреблений система ENUMER работает только с индивидуальными телефонными номерами. То есть невозможно одной ENUM-записью отхватить изрядный кусок номерного пространства.</p>
</div>
</div>
<div class="sect4">
<h5 id="_как_создать_верифицированную_запись_в_системе_enumer">Как создать верифицированную запись в системе ENUMER</h5>
<div class="paragraph">
<p>Владелец IP ATC, желающий получать звонки с использованием ENUM, должен вначале настроить свою IP ATC таким образом, чтобы иметь возможность получать входящие звонки на SIP URI «из мира». Детали настройки зависят от конкретной IP АТС (PBX) и сетевого окружения, и ничем не отличаются от обычный настройки PBX без блокчейна.</p>
</div>
<div class="paragraph">
<p>После этого надо разместить в EmerCoin NVS верифицированную ENUM-запись, которой и будут пользоваться звонящие. Для этого надо предпринять следующие действия:</p>
</div>
<div class="paragraph">
<p><strong>Установить кошелёк Emercoin</strong>
Кошелёк (узел) Emercoin является клиентской программой распределённой ENUM-сети (да и не только ENUM), и чем-то вроде «личного кабинета», где пользователь может создать свои ENUM-записи и потом обновлять их по мере необходимости. Кошелёк можно скачать тут.</p>
</div>
<div class="paragraph">
<p>Для управления записями рекомендуем использовать GUI-кошелёк для Вашей ОС.</p>
</div>
<div class="paragraph">
<p>После скачивания и запуска, подождите, пока кошелёк не синхронизирует локальную копию блокчейна. Это может занять несколько часов.</p>
</div>
<div class="paragraph">
<p><strong>Получить монеты EMC</strong>
Далее, надо где-то приобрести монет EMC, необходимых для загрузки и обновления записей в NVS. Их можно приобрести на одной из бирж, либо же обратиться к разработчикам.
Для резервирования одной записи на 10 лет и нескольких последующих обновлений требуется примерно 0.05EMC, что по текущему курсу составляет $0.06. В общем, цена вполне приемлема. А если принять во внимание, что в скором времени цена на NVS-запись будет снижена в 100 раз, можно считать расходы на обслуживание ENUMER-записи близкими к нулю.</p>
</div>
<div class="paragraph">
<p>Адрес, куда получать монеты, находится в меню “File/Receiving Addresses”, и выглядит примерно так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ERFJfQGwmZEomHQHGZsRFLZEyBxaWsCHTo</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Создать ENUM-запись</strong></p>
</div>
<div class="paragraph">
<p>Для хранения ENUM-записей используется доверенное децентрализованное хранилище — EmerCoin NVS (Name-Value Storage). Доступ к записям NVS делается либо через GUI кошелька в табе “Manage Names”, либо командами JSON API, приведёнными в документации. NVS-запись, как явствует из названия, состоит из Имени (Name) и значения (Value).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/enumer.png" alt="enumer">
</div>
</div>
<div class="paragraph">
<p><strong>Name</strong></p>
</div>
<div class="paragraph">
<p>Для подсистемы ENUM имена записей имеют следующий вид:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>enum:phone_num:N</pre>
</div>
</div>
<div class="paragraph">
<p>Здесь:
* <strong>enum</strong> — префикс сервиса
* <strong>phone_num</strong> — телефонный номер в формате E164
* <strong>N</strong> — номер попытки для борьбы со скваттерами (десятичное число)</p>
</div>
<div class="paragraph">
<p>Например:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>enum:18009359935:0</pre>
</div>
</div>
<div class="paragraph">
<p>Если про префикс сервиса и номер и так всё понятно, то назначение параметра N нуждается в разъяснении. Это число нужно, чтобы защитить истинного владельца номера от скваттеров, которые могут захватить ENUM-запись, соответствующую чужому номеру, и посредством неё пробовать делать всякие нехорошие вещи. Использовать засквоченную запись они по любому не смогут (см. про верификацию ниже), но при отсутствии номера попытки N у настоящего хозяина номера не будет возможности внести свою запись. В случае же использования номера N реальный хозяин телефонного номера может создать запись с первым свободным значением N. Например предположим, что Вы хотите создать ENUM-запись для телефонного номера 18009359935, а приведённое в примере выше — уже захватил какой-то скваттер. Не беда, создайте имя «enum:18009359935:1», и после верификации система будет верить именно Вашему имени, а скваттеру останется любоваться бесполезной записью, в которой он сжёг свои монеты. Если и это имя засквочено — попробуйте создать запись с номером N=2, и так далее.</p>
</div>
<div class="paragraph">
<p><strong>Value</strong></p>
</div>
<div class="paragraph">
<p>Поле Value cостоит из нескольких строк. Строки — либо U-директивы NAPTR (<a href="https://tools.ietf.org/html/rfc3402">rfc3402</a>) ENUM(начинаются с E2U), либо подписи верификаторов (начинаются с SIG). Одна ENUM-запись может иметь как несколько директив, так и несколько подписей от различных верификаторов. Пример value, включающий U-директирву и подпись:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>E2U+sip=100|10|!^(.*)$!sip:17772325555@in.callcentric.com!
SIG=ver:enum|IC00zMELlEwmMHLpQs8=</pre>
</div>
</div>
<div class="paragraph">
<p>У Вас пока нет подписей (строки подписей Вас предоставят верификаторы), поэтому при создании записи внесите только U-директивы (хотя бы одну), которые и обеспечат направление звонков на Вашу IP ATC. Структура директив следующая:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Service=Priority|Preference|Regex</pre>
</div>
</div>
<div class="paragraph">
<p>В примере выше:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Service -&gt; E2U+sip
Priority -&gt; 100
Preference -&gt;10
Regex -&gt; !^(.*)$!sip:17772325555@in.callcentric.com!</pre>
</div>
</div>
<div class="paragraph">
<p>Смысл полей и их названия соответствуют <a href="https://tools.ietf.org/html/rfc5483">стандартам</a> классического ENUM. Для тех, кому лень читать документацию, краткая инструкция для начинающих:</p>
</div>
<div class="paragraph">
<p>Почти всегда сервис — это как в примере выше, E2U+sip для SIP IP ATC. Возможны другие варианты, например E2U+iax или что-либо подобное. Как упоминалось выше, в ENUM-записи может присутствовать несколько U-директив.</p>
</div>
<div class="paragraph">
<p>Priority, Preference — оставьте как в примере для начала. Не рекомендуется их сильно уменьшать.</p>
</div>
<div class="paragraph">
<p>Самое главное — это Regex. Это правило, по которому телефонный номер преобразовывается в SIP URI. Разделителем выступает “!”. В первой части — regex накладывается на телефонный номер, а во второй — этот номер подставляется вместо \1, и тем самым формируется SIP URI.
Ещё хороший пример использования regex:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>!^\+?441865332(.*)$!sip:\1@nominet.org.uk!</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Провести верификацию</strong></p>
</div>
<div class="paragraph">
<p>Итак, ENUM запись создана, и блокчейн её принял. Она уже всем доступна. Но IP ATC звонящих её дружно игнорируют, так как в ней нет подписей верификаторов, которым они верят. И это — правильно. Ибо мало ли кто создал запись с Вашим телефонным номером? И что, теперь весь трафик отправлять куда там указано, не глядя? Нет, трафик будут отправлять только на основе верифицированных записей, содержащих подпись верификатора.</p>
</div>
<div class="paragraph">
<p>В настоящее время ещё не сделана система автоматической верификации, но в планах стоит её изготовление и ввод в эксплуатацию. Если Вы желаете поучаствовать в партнёрстве по созданию и эксплуатации подсистемы автоматической верификации, свяжитесь с нами: <a href="mailto:enumer@emercoin.com">enumer@emercoin.com</a>.
Покамест же верификация происходит через человека-оператора.</p>
</div>
<div class="paragraph">
<p>Для получения подписи напишите e-mail на адрес <a href="mailto:enumer@emercoin.com">enumer@emercoin.com</a>. В письме укажите NVS-имя Вашей записи ENUMER, например: <strong>enum:18009359935:0</strong>.
В течение нескольких дней оператор проверит наличие записи, и сделает тестовый звонок на соответствующий номер, чтобы убедиться, что хозяин номера в курсе запроса и согласен использовать ENUMER. После успешной верификации мы отправим ответ, содержащий подпись, которую Вы и внесёте в Вашу NVS-запись. После внесения подписи, Ваша запись станет доверенной, и другие пользователи смогут её использовать для прямых звонков в Ваш PBX.</p>
</div>
<div class="paragraph">
<p><strong>Добавить подпись верификатора в свою ENUM-запись</strong></p>
</div>
<div class="paragraph">
<p>Внеся эту подпись в Вашу ENUM-запись и выполнив NAME_UPDATE, Вы доказываете всем владение номером, и звонящие (клиенты ENUMER-а), которые верят данному верификатору, будут отправлять звонки не на PSTN, а на SIP URI Вашей IP ATC.</p>
</div>
<div class="paragraph">
<p>В ЕNUM-записи подписей может быть несколько, от разных верификаторов. Клиент пользуется ENUM-записью, если там присутствует хотя бы одна подпись от одного из тех верификаторов, которым он верит.</p>
</div>
<div class="paragraph">
<p>После добавления подписи — Ваша ENUM-запись активна, и клиенты ENUMER-а могут звонить Вам напрямую, не используя PSTN-сети.</p>
</div>
<div class="paragraph">
<p><strong>Как звонить, используя ENUMER (клиент)</strong>
Теперь, после того, как запись о Вашей IP ATC внесена в ENUMER, осталось начать пользоваться системой на благо себя и других абонентов. Для этого надо сделать, чтобы Ваша IP ATC посылала ENUM-запросы в Emercoin NVS.</p>
</div>
<div class="paragraph">
<p><strong>Использование сервиса enum.enumer.org</strong>
Мы создали публичный шлюз в ENUMER, и любой пользователь PBX безо всяких настроек блокчейна и тп может им пользоваться в своей АТС. Для этого надо послать ENUM-запрос в DNS: на резолвер enum.enumer.org. Пример тестового запроса из командной строки и ответа:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ dig -t naptr +short 53995390081.enum.enumer.org
100 10 "u" "E2U+sip" "!^(.*)$!sip:\\1@tollfree.alcazarnetworks.com!"</pre>
</div>
</div>
<div class="paragraph">
<p>Но при использовании нашего шлюза, Вы потенциально получаете все рассмотренные выше проблемы, связанные с централизацией и использованием внешнего сервера. Поэтому основным назначением нашего шлюза является предоставление тестовой среды, и не более того. Мы настоятельно не рекомендуем использовать наш шлюз для практического применения в системе под эксплуатацией, а развернуть собственный шлюз в EmerDNS, как будет рассказано ниже.</p>
</div>
<div class="paragraph">
<p><strong>Разворачивание шлюза в EmerDNS</strong>
Наиболее правильный, быстрый и безопасный вариант — поставить у себя демон-кошелёк EmerCoin, и развернуть шлюз в emcDNS в локальной сети или даже на сервере, где работает IP ATC. Документация по разворачиванию такого шлюза — {https://emercoin.com/documentation/blockchain-services/emerdns/emerdns-introduction/}[тут]. Смотрите раздел «Интеграция в обычное DNS дерево».</p>
</div>
<div class="paragraph">
<p>В конфиг BINDa (или другого DNS-proxy) необходимо будет добавить ссылку на пятую зону «enum» по аналогии с четырьмя уже имеющимися от EmerDNS.</p>
</div>
<div class="paragraph">
<p>Кроме того, в конфиге кошелька emercoin.conf необходимо добавить «$enum» к списку обслуживаемых зон, как в примере ниже. Использование знака «$» вместо точки указывает кошельку, что эта зона будет обслуживаться по правилам ENUM rfc6116. Кроме того, в конфиг кошелька необходимо добавить два параметра, специфичных для ENUM:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Список доверенных верификаторов enumtrust (в примере ниже — ver:enum|olegh)</p>
</li>
<li>
<p>Имя файла или ссылка на NVS-запись (ссылка начинается с ‘@’), содержащая список правил для попытки отработать toll-free звонки через публичных приземлятелей, если в ENUMER-e ничего не было найдено для искомого номера. Это enumtollfree.</p>
</li>
<li>
<p>В примере ниже, в качестве такого списка выступает ссылка на NVS-запись enum:tollfree, которая в настоящее время содержит правила для приземления toll-free звонков в США, Францию и Польшу. Мы будем поддерживать актуальность этой записи, и добавлять пути на другие страны по мере появления соответствующих приземлятелей.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Таким образом, в конфигурационный файл emercoin.conf надо добавить следующие строки:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>emcdnsallowed=$enum|.coin|.emc|.lib|.bazar # Allowed TLDs, including ENUM
enumtrust=ver:enum|olegh
enumtollfree=@enum:tollfree</pre>
</div>
</div>
<div class="paragraph">
<p>Для тестирования настроек, попробуйте вручную послать ENUM-запрос в DNS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ dig -t naptr +short 53995390081.enum localhost</pre>
</div>
</div>
<div class="paragraph">
<p>Ответ должен быть примерно таким:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>100 10 "u" "E2U+sip" "!^(.*)$!sip:\\1@tollfree.alcazarnetworks.com!"</pre>
</div>
</div>
<div class="paragraph">
<p>Если не работает что-то — попробуйте послать запрос непосредственно в кошелёк, на порт 5335:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ dig -t naptr +short 53995390081.enum localhost –p 5335</pre>
</div>
</div>
<div class="paragraph">
<p>И локализовать место сбоя. Но при правильной настройке — всё работает сразу и без проблем.</p>
</div>
<div class="paragraph">
<p><strong>Подключение IP ATC</strong></p>
</div>
<div class="paragraph">
<p>Это проще всего. В dialplan-e IP ATC надо указать, что после разрешения внутренних и корпоративных номеров, но перед переходом к PSTN-провайдерам, делаем запрос в ENUMER. Естественно, перед запросом надо привести искомый номер к формату ITU-T E164.</p>
</div>
<div class="paragraph">
<p>Ниже приведён пример фрагмента dialplan-a для FreeSWITCH, который сначала приводит номер к формату E164 без лидирующего плюса, а потом делает запрос в ENUMER, добавляя плюс при запросе. Если ENUMER не может помочь — делается запрос в e164.arpa. Ну и если и там ничего нет — то dialplan переходит к PSTN-приземлятелям. Аналогичный фрагмент dialplan-a можно создать для другой IP ATC, поддерживающей ENUM (Asterisk, Yate, etc).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;!-- Normalize numbers to ITU-T E164 without PLUS --&gt;
&lt;extension name="Normalize to ITU-T E164 without PLUS"&gt;
  &lt;condition field="destination_number" expression="^(?:\+|011|00)(\d{7,})$" break="on-true"&gt;
    &lt;action application="transfer" data="$1"/&gt;
  &lt;/condition&gt;
  &lt;condition field="destination_number" expression="^(\d{10})$" break="on-true"&gt;
    &lt;action application="transfer" data="1$1"/&gt;
  &lt;/condition&gt;
  &lt;condition field="destination_number" expression="^(\d{7})$" break="on-true"&gt;
     &lt;action application="transfer" data="1${home_code}$1"/&gt;
  &lt;/condition&gt;
&lt;/extension&gt;&lt;!-- Lookup E164 with PLUS in the ENUMER and e164.arpa --&gt;
&lt;extension name="Lookup ENUM" continue="true"&gt;
  &lt;condition field="destination_number" expression="^(\d{7,})$" break="on-true"&gt;
    &lt;action application="ring_ready"/&gt;
    &lt;action application="set" data="hangup_after_bridge=true"/&gt;
    &lt;action application="set" data="continue_on_fail=true"/&gt;
    &lt;action application="set" data="effective_caller_id_name=+15553550000"/&gt;
    &lt;action application="set" data="effective_caller_id_number=+15553550000"/&gt;
    &lt;action application="enum" data="+$1 enum"/&gt;
    &lt;action application="bridge" data="${enum_auto_route}"/&gt;
    &lt;action application="enum" data="+$1 e164.arpa"/&gt;
    &lt;action application="bridge" data="${enum_auto_route}"/&gt;
    &lt;/condition&gt;
&lt;/extension&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Автоматическая валидация телефонных номеров</strong>
<a href="https://enumer.bitname.ru" class="bare">enumer.bitname.ru</a> - позволяет за один EMC валидировать номер и получить на свой кошелёк ENUM-запись</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_emerlnx_dead">2.6. EmerLNX (Dead)</h3>
<div class="paragraph">
<p>pass</p>
</div>
</div>
<div class="sect2">
<h3 id="_emertts_possible_dead">2.7. EmerTTS (Possible Dead)</h3>
<div class="paragraph">
<p>pass</p>
</div>
</div>
<div class="sect2">
<h3 id="_emermagnet">2.8. EmerMagnet</h3>
<div class="paragraph">
<p>EmerMAGNET - это хранилище магнитных ссылок BitTorrent под аббревиатурой сервиса <strong>«magnet»</strong> в EmerNVS.</p>
</div>
<div class="paragraph">
<p>Разместив ссылку в Emer, вы никогда не потеряете свой любимый торрент.</p>
</div>
<div class="paragraph">
<p>Как это работает? Блокчейн хранит вечно любую информацию, верно? Вот мы и подумали, сколько бывало&#8201;&#8212;&#8201;ищещь какой-нибудь старый фильм, а его и след простыл, остались только левые копии с совсем не тем перводом и т.п. Так вот, магнет-ссылка в блокчейне никуда не денется и придет время, её обязательно найдут. (правда останутся ли копии того фильма на дисках энтузиастов, но это другой вопрос)</p>
</div>
<div class="paragraph">
<p>EmcMAGNET - это хранилище <a href="https://www.makeuseof.com/tag/bittorrent-magnets-work-technology-explained/">магнитных ссылок BitTorrent</a> под аббревиатурой сервиса «magnet» в Emercoin NVS.</p>
</div>
<div class="paragraph">
<p>Магнитные ссылки должны использовать следующий формат имя&#8594; значение :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>"name" : "magnet:Emercoin 0.3.2 for Linux - packed as tar.gz, original file from emercoin.com"
"value" : "magnet:?xt=urn:btih:dff183bcac72a628fcac88ac1c85c239b806fd5e&amp;dn=emercoin-0.3.2-linux.tar.gz"</pre>
</div>
</div>
<div class="paragraph">
<p>Список всех магнитных ссылок можно получить с помощью следующей команды с Emercoin API :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ emercoin-cli name_filter '^magnet:'</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_filevalidator">2.9. FileValidator</h3>
<div class="paragraph">
<p>FV&#8201;&#8212;&#8201;сервис проверки целостности файлов, полученных из недостоверных источников.</p>
</div>
<div class="paragraph">
<p>Файл (программа или документ) подписывается разработчиком или издателем, и цифровые подписи файла публикуются в блокчейн.</p>
</div>
<div class="paragraph">
<p>Любой пользователь может проверить файл, полученный из торрентов или подобных источников на предмет целостности и неизменности. Проверка возможна даже в том случае, когда разработчик прекратил  поддержку, или вообще вышел из бизнеса. Это весьма актуально для драйверов устаревших устройств, которые можно найти только в архивах сомнительных сайтов.</p>
</div>
<div class="paragraph">
<p>Также FV-записи в блокчейне Emer имеют достоверные метки времени, и можно узнать, кто и когда опубликовал ту или иную подпись, а также когда созданы записи подписантов.</p>
</div>
<div class="sect3">
<h4 id="_как_это_работает">2.9.1. Как это работает</h4>
<div class="paragraph">
<p>Рассмотрим работу системы на реальном примере. Пусть есть издатель Emercoin, который сам себе валидатор (простейший случай). Издатель выпустил бинарный файл-инсталлятор кошелька Emercoin для Windows, имя файла: emercoin-0.7.10-win64-setup.exe.</p>
</div>
<h5 id="_издатель" class="discrete">Издатель</h5>
<div class="paragraph">
<p>Издатель Emercoin желает воспользоваться предлагаемой системой FV для того, чтобы пользователи могли проверить полученный бинарный файл и убедиться, что они получили именно то, что распространяет издатель.</p>
</div>
<div class="paragraph">
<p>Для этого он хеширует файл алгоритмом sha256 (система предполагает смену алгоритма при необходимости), и получает хеш файла:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>169dc5dd293cd82f84737055403ae87a62008072d785376f56f6d309288a092a</pre>
</div>
</div>
<div class="paragraph">
<p>Издатель на основе хеш-суммы создаёт поисковое имя, которое будет выступать ключом в Emercoin NVS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>fv:sha256=169dc5dd293cd82f84737055403ae87a62008072d785376f56f6d309288a092a</pre>
</div>
</div>
<div class="paragraph">
<p>Здесь:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>fv:</strong> Префикс сервиса, <strong>File Validator</strong></p>
</li>
<li>
<p><strong>sha256:</strong> алгоритм хеширования (дефолтный <strong>sha256</strong>, но возможна в будущем замена на другие алгоритмы)</p>
</li>
<li>
<p><strong>hex-строка:</strong> хеш-сумма файла.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>После этого, издатель передаёт файл для проверки и подписи валидаторам, которых выбирает сам. В нашем примере, сам разработчик и выступает в качестве валидатора.</p>
</div>
<h5 id="_валидатор" class="discrete">Валидатор</h5>
<div class="paragraph">
<p>Валидатор имеет в Emercoin NVS уникальное имя, с которым связан Emercoin address. Имя имеет префикс сервиса <strong>val:</strong>, и может содержать только латинские символы нижнего регистра, а также точку и минус. То есть разрешённое множество символов: <strong>[a-z.-]</strong>. Пробелы, табуляции, спецсимволы или символы национальных кодировок также запрещены. Это ограничение призвано заблокировать манипуляции, позволяющие создавать внешне похожие имена валидаторов и от их имени подписывать всякое. Типичный пример такой манипуляции&#8201;&#8212;&#8201;внешне похожие, но отличающиеся имена: <strong>paypal - paypaI – paypa1</strong>.</p>
</div>
<div class="paragraph">
<p>Например, имя валидатора olegarch&#8201;&#8212;&#8201;корректное, а имя o1egarch&#8201;&#8212;&#8201;некорректное, так как содержит цифру 1.</p>
</div>
<div class="paragraph">
<p>В нашем примере, валидатором выступает Emercoin, владеющий NVS-именем: <strong>val:emercoin</strong> связанным с адресом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>EcXrMDf8YyLMFk6RCnkAnPm9fmDBfu5eQX</pre>
</div>
</div>
<div class="paragraph">
<p>На основании полученного файла, валидатор создаёт поисковое имя аналогично тому, как это сделал издатель. После этого издатель создаёт строку для подписи:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>emercoin|100|fv:sha256=169dc5dd293cd82f84737055403ae87a62008072d785376f56f6d309288a092a</pre>
</div>
</div>
<div class="paragraph">
<p>Здесь:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>emercoin:</strong> NVS-имя валидатора.</p>
</li>
<li>
<p><strong>100:</strong> Уровень доверия (зарезервировано для дальнейшего использования).</p>
</li>
<li>
<p><strong>fv..f6:</strong> поисковое имя, аналогичное таковому у издателя.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Эту строку валидатор подписывает командой <strong>signmessage</strong> в своём кошельке адресом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>EcXrMDf8YyLMFk6RCnkAnPm9fmDBfu5eQX</pre>
</div>
</div>
<div class="paragraph">
<p>связанным с именем валидатора <strong>val:emercoin:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>signmessage  EcXrMDf8YyLMFk6RCnkAnPm9fmDBfu5eQX em..f6</pre>
</div>
</div>
<div class="paragraph">
<p>Полученную цифровую подпись:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>IH0yysgQpP1xIjRcJPrWaDVrl9B35BfrNcgOdwNm1gjFeE2zpKZZooSd55LydWlPnnlfnLiI+2Q1VUzzsD/8irE=</pre>
</div>
</div>
<div class="paragraph">
<p>валидатор передаёт издателю.</p>
</div>
<div class="paragraph">
<p>Издатель, получив подпись от валидатора, создаёт и публикует в блокчейне NVS-запись, где в качестве имени выступает поисковый ключ, а <strong>value</strong> содержит строку с подписью:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SIG=emercoin|100|IH0yysgQpP1xIjRcJPrWaDVrl9B35BfrNcgOdwNm1gjFeE2zpKZZooSd55LydWlPnnlfnLiI+2Q1VUzzsD/8irE=</pre>
</div>
</div>
<div class="paragraph">
<p>Здесь:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SIG=:</strong> Префикс, специфицирующий цифровую подпись.</p>
</li>
<li>
<p><strong>emercoin:</strong> NVS-имя валидатора.</p>
</li>
<li>
<p><strong>100:</strong> Уровень доверия (зарезервировано для дальнейшего использования).</p>
</li>
<li>
<p><strong>IH..E=:</strong> цифровая подпись валидатора.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Value</strong> может содержать несколько строк-подписей и другие строки, содержащие произвольную информацию о подписываемом файле. Например, реальная NVS-запись о нашем файле имеет структуру:</p>
</div>
<div class="paragraph">
<p>Name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>fv:sha256=169dc5dd293cd82f84737055403ae87a62008072d785376f56f6d309288a092a</pre>
</div>
</div>
<div class="paragraph">
<p>Value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Emercoin core wallet, full node
File: emercoin-0.7.10-win64-setup.exe
Download: https://emercoin.com/en/for-coinholders#download
SIG=emercoin|100|IH0yysgQpP1xIjRcJPrWaDVrl9B35BfrNcgOdwNm1gjFeE2zpKZZooSd55LydWlPnnlfnLiI+2Q1VUzzsD/8irE=
SIG=olegarch|100|H32Bp3cLoqBFvlyUIIXLrKX3TD+IG2aX2dmegy4oIxGEWeKBw9YTITKWaFWM4UdejEgpH5em4Gi/ZfoZFU69Owk=</pre>
</div>
</div>
<div class="paragraph">
<p>Здесь мы видим, что информация о файле содержит подписи от двух валидаторов&#8201;&#8212;&#8201;<strong>emercoin</strong> и <strong>olegarch</strong>.</p>
</div>
<h5 id="_пользователь" class="discrete">Пользователь</h5>
<div class="paragraph">
<p>Пользователь, получив файл из недоверенного источника, желает убедиться, что данный файл – именно тот, который опубликовал издатель. Для этого он предпринимает следующие действия.</p>
</div>
<div class="paragraph">
<p>Хеширует файл, и получает его хеш sha256, например командой:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ sha256sum emercoin-0.7.10-win64-setup.exe
169dc5dd293cd82f84737055403ae87a62008072d785376f56f6d309288a092a  emercoin-0.7.10-win64-setup.exe</pre>
</div>
</div>
<div class="paragraph">
<p>На основании полученной хеш-суммы пользователь формирует поисковое имя аналогично тому, как это делал издатель (см выше):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>fv:sha256=169dc5dd293cd82f84737055403ae87a62008072d785376f56f6d309288a092a</pre>
</div>
</div>
<div class="paragraph">
<p>Извлекает из Emercoin NVS информацию о полученном файле, посредством команды name_show:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>name_show fv:sha256=169dc5dd293cd82f84737055403ae87a62008072d785376f56f6d309288a092a

{
"name": "fv:sha256=169dc5dd293cd82f84737055403ae87a62008072d785376f56f6d309288a092a",
"value": "Emercoin core wallet, full node\nFile: emercoin-0.7.10-win64-setup.exe\nDownload: https://emercoin.com/en/for-coinholders#download\nSIG=emercoin|100|IH0yysgQpP1xIjRcJPrWaDVrl9B35BfrNcgOdwNm1gjFeE2zpKZZooSd55LydWlPnnlfnLiI+2Q1VUzzsD/8irE=\nSIG=olegarch|100|H32Bp3cLoqBFvlyUIIXLrKX3TD+IG2aX2dmegy4oIxGEWeKBw9YTITKWaFWM4UdejEgpH5em4Gi/ZfoZFU69Owk=",
"txid": "a22fa9b5ac1725d30e6e6dc9bb2038b0a0afbe362031eb8b9d9a4392e0cc46ff",
"address": "EfsrojhfLGf6LPYRFytiaGRVwYmQ9KsWN5",
"expires_in": 957918,
"expires_at": 1391644,
"time": 1598137455
}</pre>
</div>
</div>
<div class="paragraph">
<p>Из полученного результата, извлекает строки с подписями:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SIG=emercoin|100|IH0yysgQpP1xIjRcJPrWaDVrl9B35BfrNcgOdwNm1gjFeE2zpKZZooSd55LydWlPnnlfnLiI+2Q1VUzzsD/8irE=
SIG=olegarch|100|H32Bp3cLoqBFvlyUIIXLrKX3TD+IG2aX2dmegy4oIxGEWeKBw9YTITKWaFWM4UdejEgpH5em4Gi/ZfoZFU69Owk=</pre>
</div>
</div>
<div class="paragraph">
<p>Пользователь верифицирует все или выборочно некоторые подписи следующим образом:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Из строки извлекает имя валидатора, в нашем примере emercoin.</p>
</li>
<li>
<p>Посредством запроса <strong>name_show</strong> на <strong>val:emercoin</strong>, получает EMC-адрес, связанный с этим именем:</p>
<div class="listingblock">
<div class="content">
<pre>EcXrMDf8YyLMFk6RCnkAnPm9fmDBfu5eQX.</pre>
</div>
</div>
</li>
<li>
<p>Извлекает из строки подпись валидатора <strong>IH..e=</strong></p>
</li>
<li>
<p>Формирует строку для подписи аналогично тому, как это делал валидатор:</p>
<div class="listingblock">
<div class="content">
<pre>emercoin|100|fv:sha256=169dc5dd293cd82f84737055403ae87a62008072d785376f56f6d309288a092a</pre>
</div>
</div>
</li>
<li>
<p>Запросом <strong>verifymessage</strong> пользователь проверяет достоверность подписи:</p>
<div class="listingblock">
<div class="content">
<pre>verifymessage адрес подпись строка_для_подписи</pre>
</div>
</div>
<div class="paragraph">
<p>В нашем примере – это:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>verifymessage  EcXrMDf8YyLMFk6RCnkAnPm9fmDBfu5eQX IH0yysgQpP1xIjRcJPrWaDVrl9B35BfrNcgOdwNm1gjFeE2zpKZZooSd55LydWlPnnlfnLiI+2Q1VUzzsD/8irE= emercoin|100|fv:sha256=169dc5dd293cd82f84737055403ae87a62008072d785376f56f6d309288a092a</pre>
</div>
</div>
</li>
<li>
<p>Получив результат проверки, пользователь принимает решение, что делать с проверяемым файлом.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_как_этим_пользоваться">2.9.2. Как этим пользоваться</h4>
<div class="paragraph">
<p>Выше, в разделе “как это работает”, был предоставлен пошаговый алгоритм как генерации и публикации подписей, так и проверки файлов. Понятно, что вручную все эти операции делать сложно, особенно для конечного пользователя. Поэтому для практического применения мы написали программу fv.php, которую можно скачать из репозитория Emercoin <a href="https://github.com/emercoin/FV">здесь</a>.</p>
</div>
<div class="paragraph">
<p>Эта программа также является “референтной имплементацией” рассмотренных выше алгоритмов, и может быть использована в качестве практического примера для написания аналогичной программы или для интеграции системы <strong>FV</strong> в менеджеры пакетов или другие программы и сервисы.</p>
</div>
<div class="paragraph">
<p>Программа изначально написана для Linux/FreeBSD, но может быть запущена и из командной строки Windows, например в соответствии с <a href="https://stackoverflow.com/questions/12870880/run-php-file-in-windows-command-prompt-cmd">инструкцией</a>.</p>
</div>
<div class="paragraph">
<p>После скачивания, в программе необходимо отредактировать URL для подключения к локальному кошельку, установив там актуальные параметры username/password/port:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$emcCONNECT = "http://user:secret_pass@localhost:6662";</pre>
</div>
</div>
<div class="paragraph">
<p>Также, возможно, для Windows надо удалить первую строку файла, специфицирующую интерпретатор:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#!/usr/bin/php</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_использование_программы">2.9.3. Использование программы</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Тестирование</dt>
<dd>
<p>Вначале, надо убедиться, что программа запускается без ошибок и корректно подсоединяется к кошельку Emercoin:</p>
<div class="listingblock">
<div class="content">
<pre>$ ./fv.php -getinfo</pre>
</div>
</div>
<div class="paragraph">
<p>В случае, если установка актуальных параметров произведена верно, то программа напишет результат getinfo, и можно приступать к дальнейшей работе.</p>
</div>
</dd>
<dt class="hdlist1">Проверка файла</dt>
<dd>
<p>Для этого надо запустить программу с единственным параметром - именем файла, и она проведёт весь процесс валидации.</p>
<div class="listingblock">
<div class="content">
<pre>$ ./fv.php ./emercoin-0.7.10-win64-setup.exe

File info from NVS:
    Emercoin core wallet, full node
    File: emercoin-0.7.10-win64-setup.exe
    Download: https://emercoin.com/en/for-coinholders#download

Validation results:
    emercoin/EMERCOIN [Emercoin File Validator] created 2020-08-20 05:08; Signature PASSED
    olegarch/OLEGARCH [Oleg Khovayko FV] created 2020-08-20 02:08; Signature PASSED</pre>
</div>
</div>
<div class="paragraph">
<p>В примере выше программа сообщает время создания NVS-записи для данного файла (слишком свежие записи для старых файлов могут вызвать подозрение), а также результаты проверок подписей. Здесь видно, что для данного файла подписи от обоих валидаторов проверки прошли успешно, и файл не содержит неавторизированных изменений.</p>
</div>
</dd>
<dt class="hdlist1">Генерация подписи валидатора</dt>
<dd>
<p>Для генерации подписи, Ваш кошелёк должен содержать NVS-запись валидатора, и быть полностью разблокированным.</p>
<div class="paragraph">
<p>Для генерации подписи, необходимо указать программе имя файла, и строку, содержащую имя валидатора и уровень доверия (насколько валидатор доверяет издателю файла). Второй параметр надо взять в кавычки, иначе интерпретатор командной строки будет интерпретировать символ “|” как shell pipe.</p>
</div>
<div class="paragraph">
<p>Пример запуска и результат:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./fv.php ./emercoin-0.7.10-win64-setup.exe 'olegarch|100'

FV signature for upload to NVS FV-record:

NVS Key:
fv:sha256=169dc5dd293cd82f84737055403ae87a62008072d785376f56f6d309288a092a

Signature line:
SIG=olegarch|100|H32Bp3cLoqBFvlyUIIXLrKX3TD+IG2aX2dmegy4oIxGEWeKBw9YTITKWaFWM4UdejEgpH5em4Gi/ZfoZFU69Owk=</pre>
</div>
</div>
<div class="paragraph">
<p>В качестве результата, программа возвращает NVS-key и подпись для передачи издателю. Издатель может загрузить эти параметры в NVS, или же скомбинировать в value подписи от нескольких издателей.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="installation.html">Installation</a> | ↑ Up: <a href="index.html">Emercoin</a> | Next: <a href="randpay.html">RandPay</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-04-30 18:20:56 +0300
</div>
</div>
</body>
</html>